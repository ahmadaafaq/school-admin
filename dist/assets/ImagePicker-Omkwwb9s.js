import{ab as S,aa as T,a as g,ac as O,_ as y,ad as V,d as F,j as l,b as $,ae as N,af as W,r as U,i as z,q as J,ag as K,P as o,h as C,a7 as A,a8 as Q,J as X,K as Y,R as Z,B as ee,z as te,T as se}from"./index-zLCHO5gj.js";function oe(e){return S("MuiImageList",e)}T("MuiImageList",["root","masonry","quilted","standard","woven"]);const P=g.createContext({}),re=["children","className","cols","component","rowHeight","gap","style","variant"],ae=e=>{const{classes:r,variant:c}=e;return N({root:["root",c]},oe,r)},ie=O("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:c}=e;return[r.root,r[c.variant]]}})(({ownerState:e})=>y({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},e.variant==="masonry"&&{display:"block"})),ne=g.forwardRef(function(r,c){const h=V({props:r,name:"MuiImageList"}),{children:b,className:j,cols:m=2,component:u="ul",rowHeight:v="auto",gap:i=4,style:w,variant:p="standard"}=h,x=F(h,re),d=g.useMemo(()=>({rowHeight:v,gap:i,variant:p}),[v,i,p]);g.useEffect(()=>{},[]);const a=p==="masonry"?y({columnCount:m,columnGap:i},w):y({gridTemplateColumns:`repeat(${m}, 1fr)`,gap:i},w),t=y({},h,{component:u,gap:i,rowHeight:v,variant:p}),f=ae(t);return l.jsx(ie,y({as:u,className:$(f.root,f[p],j),ref:c,style:a,ownerState:t},x,{children:l.jsx(P.Provider,{value:d,children:b})}))}),le=ne;function ce(e){return S("MuiImageListItem",e)}const ue=T("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),E=ue,fe=["children","className","cols","component","rows","style"],me=e=>{const{classes:r,variant:c}=e;return N({root:["root",c],img:["img"]},ce,r)},de=O("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:c}=e;return[{[`& .${E.img}`]:r.img},r.root,r[c.variant]]}})(({ownerState:e})=>y({display:"block",position:"relative"},e.variant==="standard"&&{display:"flex",flexDirection:"column"},e.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${E.img}`]:y({objectFit:"cover",width:"100%",height:"100%",display:"block"},e.variant==="standard"&&{height:"auto",flexGrow:1})})),he=g.forwardRef(function(r,c){const h=V({props:r,name:"MuiImageListItem"}),{children:b,className:j,cols:m=1,component:u="li",rows:v=1,style:i}=h,w=F(h,fe),{rowHeight:p="auto",gap:x,variant:d}=g.useContext(P);let a="auto";d==="woven"?a=void 0:p!=="auto"&&(a=p*v+x*(v-1));const t=y({},h,{cols:m,component:u,gap:x,rowHeight:p,rows:v,variant:d}),f=me(t);return l.jsx(de,y({as:u,className:$(f.root,f[d],j),ref:c,style:y({height:a,gridColumnEnd:d!=="masonry"?`span ${m}`:void 0,gridRowEnd:d!=="masonry"?`span ${v}`:void 0,marginBottom:d==="masonry"?x:void 0,breakInside:d==="masonry"?"avoid":void 0},i),ownerState:t},w,{children:g.Children.map(b,n=>g.isValidElement(n)?n.type==="img"||W(n,["Image"])?g.cloneElement(n,{className:$(f.img,n.props.className)}):n:null)}))}),pe=he;var I={},ge=z;Object.defineProperty(I,"__esModule",{value:!0});var q=I.default=void 0,ve=ge(U()),ye=l;q=I.default=(0,ve.default)((0,ye.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate");const xe=1048576,we=["jpg","gif","png","jpeg","svg","webp"];function be(e){const r=e.split(".").pop().toLowerCase();return we.includes(r)}const je=J().shape({image:K().required("This Field is Required").test("is-valid-type","Invalid file type",e=>e.length?be(e[0].name):!0).test("is-valid-size","Max allowed size is 1MB",e=>e.length?e[0].size<=xe:!0)});var k={},Le=z;Object.defineProperty(k,"__esModule",{value:!0});var D=k.default=void 0,$e=Le(U()),Ie=l;D=k.default=(0,$e.default)((0,Ie.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOffOutlined");const H=({formik:e,preview:r,setPreview:c,deletedImage:h=[],setDeletedImage:b,setDirty:j,imageFiles:m,imageType:u,ENV:v,updatedImage:i,setUpdatedImage:w})=>{const p=C("(max-width:480px)"),x=C("(max-width:920px)");g.useEffect(()=>{const a=[],t=[];if(i){let f=0;i.map(n=>{n.image_src&&a.push({key:"old",index:f,value:`${n.image_src}`}),f++})}if(m){let f=Array.from(m),n=0;for(const s of f)t.push({key:"new",index:n,value:URL.createObjectURL(s)}),n++}c([...a,...t])},[i==null?void 0:i.length,m,c]),g.useEffect(()=>{if(m){const a=[],t=[];let f=Array.from(m),n=0;for(const s of f)a.push({key:"new",index:n,value:URL.createObjectURL(s)}),n++;if(i){let s=0;i.map(L=>{L.image_src&&(t.push({key:"old",index:s,value:`${L.image_src}`}),s++)})}c([...t,...a])}},[m,c,i]);const d=a=>{var f;const t=r.indexOf(a);if(r.splice(t,1),(a==null?void 0:a.index)>-1){if(m&&a.key==="new"){const n=Array.from(m);n.splice(a.index,1),e.setFieldValue(u,n)}i&&a.key==="old"&&(i.splice(a.index,1),w(i)),j(!0)}i&&b([...h,(f=i[t])==null?void 0:f.image_src])};return console.log("preview>>",r),l.jsx(le,{sx:{width:"80%",height:"60%",overflow:"inherit"},cols:3,rowHeight:p?80:x?160:220,gap:8,children:r?r.map((a,t)=>l.jsxs(pe,{children:[l.jsx(A,{sx:{position:"absolute",left:"87%","@media screen and (max-width: 920px)":{left:"77%"},"@media screen and (max-width: 480px)":{left:"60%"},top:"-2%"},onClick:()=>d(a),children:l.jsx(Q,{title:"DELETE",children:l.jsx(D,{sx:{color:"#002147","&:hover":{color:"red",fontSize:"1.5rem",transition:"all 0.3s ease-in-out"}}})})}),l.jsx("img",{src:a.value,alt:"This image is not available",loading:"lazy",style:{objectFit:"cover",height:"100%",width:"100%",borderRadius:p?"6px":"12px",boxShadow:"2px 2px 4px hsl(0, 0%, 30%)"}})]},t)):l.jsx(X,{})})};H.propTypes={formik:o.shape({current:o.any}),setDirty:o.func,preview:o.array,setPreview:o.func,imageFiles:o.array,updatedImage:o.array,setUpdatedImage:o.func,deletedImage:o.array,setDeletedImage:o.func,imageType:o.string,ENV:o.object};const M={},ke=({onChange:e,refId:r,setDirty:c,reset:h,setReset:b,preview:j,setPreview:m,updatedImage:u=[],setUpdatedImage:v,deletedImage:i=[],setDeletedImage:w,imageType:p,ENV:x,multiple:d=!1,validation:a=!0})=>{var R;const t="image";M[`${t}`]=null;const[f,n]=g.useState(M),s=Y({initialValues:f,validationSchema:a===!0?je:null,enableReinitialize:!0,onSubmit:()=>L()});Z.useImperativeHandle(r,()=>({Submit:async()=>{await s.submitForm()}}));const L=()=>{console.log("formik.error img>>",s.errors),e&&e({values:s.values,validated:s.isSubmitting?Object.keys(s.errors).length===0:!1,dirty:s.dirty})};g.useEffect(()=>{h&&(s.resetForm(),m([]),b(!1))},[h]),g.useEffect(()=>{u!=null&&u.length&&n(u)},[u==null?void 0:u.length]);const B=!((R=s.values[`${t}`])!=null&&R.length)||d;return console.log("imageform formik.errors",s.errors),l.jsxs(ee,{m:"10px",children:[l.jsx("form",{ref:r,encType:"multipart/form-data",style:{display:d||B&&!(u!=null&&u.length)?"block":"none"},children:l.jsx(te,{accept:".jpg, .gif, .png, .jpeg, .svg, .webp, application/pdf",name:t,label:`Upload ${p} Image`,value:s.values[`${t}`]||"",size:"small",onBlur:s.handleBlur,InputProps:{multiple:d,startAdornment:l.jsxs(A,{component:"label",sx:{width:"88%"},children:[l.jsx(q,{}),l.jsx("input",{hidden:!0,multiple:d,type:"file",name:"file",onChange:G=>{const _=Array.from(G.target.files);Array.isArray(s.values[`${t}`])?s.setFieldValue(`${t}`,[...s.values[`${t}`],..._]):s.setFieldValue(`${t}`,_),c(!0)}})]})},sx:{m:1,outline:"none",width:"13%"}})}),l.jsx(H,{formik:s,deletedImage:i,setDeletedImage:w,setDirty:c,updatedImage:u,setUpdatedImage:v,imageFiles:s.values[`${t}`],preview:j,setPreview:m,imageType:t,ENV:x}),s.touched[`${t}`]&&s.errors[`${t}`]&&l.jsx(se,{variant:"body2",color:"error",mb:"10%",children:s.errors[`${t}`]})]})};ke.propTypes={onChange:o.func,refId:o.shape({current:o.any}),setDirty:o.func,reset:o.bool,setReset:o.func,preview:o.array,setPreview:o.func,updatedImage:o.array,setUpdatedImage:o.func,deletedImage:o.array,setDeletedImage:o.func,imageType:o.string,ENV:o.object,multiple:o.bool};export{ke as I,D as a,q as d};
