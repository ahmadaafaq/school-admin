import{u as C,t as P,v as S,j as t,B as l,T,p as k,U as D,X as W,l as b,w as E,h as v,a as g,y as $,A,P as B}from"./index-zLCHO5gj.js";import{l as j,S as _,a as z}from"./listBG-jqFZybtA.js";import{d as F}from"./DriveFileRenameOutlineOutlined-sr1QJdZi.js";import{u as H}from"./index-mkkoW40k.js";import"./FormControlLabel-SXp-cdUw.js";import"./toPropertyKey-mta9U6ZT.js";import"./typeof-Q9eVcF_1.js";import"./ListItemText-2nz_AZOg.js";import"./CircularProgress-ieWN9mTc.js";import"./TableCell-yZ9kbJpi.js";const R=(n=null)=>{const r=C(),a=P(r.palette.mode),{capitalizeEveryWord:c,formatDate:i}=D(),h=S(),p=e=>{h(`/holiday/update/${e}`,{state:{id:e}})};return[{field:"title",headerName:"Title",headerAlign:"center",align:"center",flex:1,minWidth:120,valueGetter:e=>`${c(e.row.title)||""} `},{field:"startDate",headerName:"Closing Date",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:e=>`${i(e.value)}`},{field:"endDate",headerName:"Opening Date",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:e=>`${i(e.value)}`},{field:"notes",headerName:"Notes",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:e=>`${c(e.value)||""}`},{field:"type",headerName:"Type",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{type:e}})=>{const m=e.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" ");return t.jsx(l,{width:"70%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:e==="school_closure"?a.greenAccent[600]:e==="partial_closure"?a.redAccent[700]:a.blueAccent[800],borderRadius:"4px",children:t.jsx(T,{color:a.grey[100],sx:{ml:"5px"},children:m})})}},n!==1&&{field:"action",headerName:"Action",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:e}})=>t.jsx(l,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:t.jsx(k,{color:"info",variant:"contained",onClick:()=>p(e),sx:{minWidth:"50px"},children:t.jsx(F,{})})})}]},w=n=>({type:W.SET_HOLIDAYS,payload:n}),L=[5,10,20],M=({rolePriority:n=null})=>{const r=b(s=>s.menuItems.selected),{listData:a,loading:c}=b(s=>s.allHolidays),i=C(),h=S(),p=E(),o=v("(max-width:480px)"),e=v("(max-width:920px)"),[x,u]=g.useState({search:!1,searching:!1}),[m,d]=g.useState(),{getPaginatedData:f}=H(),{getLocalStorage:I}=D(),y=P(i.palette.mode),N=document.getElementById("reload-btn");return g.useEffect(()=>{const s=I("menu");p($(s.selected))},[]),t.jsxs(l,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:i.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${j})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${j})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[t.jsx(l,{height:o?"19vh":e?"8vh":"11vh",borderRadius:"4px",padding:o?"1vh":"2vh",backgroundColor:y.blueAccent[700],children:t.jsxs(l,{display:"flex",height:o?"16vh":"7vh",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"center":"normal",children:[t.jsx(T,{component:"h2",variant:"h2",color:y.grey[100],fontWeight:"bold",children:r}),t.jsx(_,{action:w,api:A.HolidayAPI,getSearchData:f,oldPagination:m,reloadBtn:N,setSearchFlag:u}),n>1&&t.jsxs(k,{type:"submit",color:"success",variant:"contained",onClick:()=>{h("/holiday/create")},sx:{height:e?"4vh":"auto"},children:["Create New ",r]})]})}),t.jsx(z,{action:w,api:A.HolidayAPI,getQuery:f,columns:R(n),rows:a.rows,count:a.count,loading:c,selected:r,pageSizeOptions:L,setOldPagination:d,searchFlag:x,setSearchFlag:u})]})};M.propTypes={rolePriority:B.number};export{M as default};
