import{l as u,v as C,j as n,B as f,p as N,U as $,X as M,u as R,w as z,h as I,a as v,t as G,y as L,T as W,A as _,P as F}from"./index-zLCHO5gj.js";import{l as B,S as O,a as Q}from"./listBG-jqFZybtA.js";import{d as U}from"./DriveFileRenameOutlineOutlined-sr1QJdZi.js";import{u as X}from"./index-mkkoW40k.js";import"./FormControlLabel-SXp-cdUw.js";import"./toPropertyKey-mta9U6ZT.js";import"./typeof-Q9eVcF_1.js";import"./ListItemText-2nz_AZOg.js";import"./CircularProgress-ieWN9mTc.js";import"./TableCell-yZ9kbJpi.js";const q=()=>{const a=u(e=>e.schoolClasses),i=u(e=>e.allClasses),o=u(e=>e.schoolSections),l=u(e=>e.allSections),m=C(),{appendSuffix:y,findById:h,capitalizeEveryWord:c}=$(),x=(e,t,r,s)=>{m(`/time-table/update/${e}/${t}`,{state:{class_id:e,section_id:t,day:r,batch:s}})};return[{field:"class_id",headerName:"Class",headerAlign:"center",align:"center",flex:1,renderCell:e=>{var s,p,g,b,d,w,j,D,A,P,S,k;let t,r;return(s=i==null?void 0:i.listData)!=null&&s.length||(p=l==null?void 0:l.listData)!=null&&p.length?(t=(b=h((g=e==null?void 0:e.row)==null?void 0:g.class_id,i==null?void 0:i.listData))==null?void 0:b.class_name,r=(w=h((d=e==null?void 0:e.row)==null?void 0:d.section_id,l==null?void 0:l.listData))==null?void 0:w.section_name):((j=a==null?void 0:a.listData)!=null&&j.length||(D=o==null?void 0:o.listData)!=null&&D.length)&&(t=(P=h((A=e==null?void 0:e.row)==null?void 0:A.class_id,a==null?void 0:a.listData))==null?void 0:P.class_name,r=(k=h((S=e==null?void 0:e.row)==null?void 0:S.section_id,o==null?void 0:o.listData))==null?void 0:k.section_name),n.jsxs("div",{children:[t?y(t):"/"," ",r]})}},{field:"batch",headerName:"Batch",headerAlign:"center",align:"center",flex:1,valueGetter:e=>`${c(e.row.batch)||""} `},{field:"day",headerName:"Day",headerAlign:"center",align:"center",flex:1,valueGetter:e=>`${c(e.row.day)||""} `},{field:"action",headerName:"Action",headerAlign:"center",align:"center",flex:1,renderCell:({row:{class_id:e,section_id:t,day:r,batch:s}})=>n.jsx(f,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:n.jsx(N,{color:"info",variant:"contained",onClick:()=>x(e,t,r,s),sx:{minWidth:"50px"},children:n.jsx(U,{})})})}]},E=a=>({type:M.SET_TIME_TABLES,payload:a}),H=[5,10,20],J=({rolePriority:a=null})=>{const i=u(d=>d.menuItems.selected),{listData:o,loading:l}=u(d=>d.allTimeTables),m=R(),y=C(),h=z(),c=I("(max-width:480px)"),x=I("(max-width:920px)"),[T,e]=v.useState({search:!1,searching:!1}),[t,r]=v.useState(),{getPaginatedData:s}=X(),{getLocalStorage:p}=$(),g=G(m.palette.mode),b=document.getElementById("reload-btn");return v.useEffect(()=>{const d=p("menu");h(L(d.selected))},[]),n.jsxs(f,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:m.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${B})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${B})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[n.jsx(f,{height:c?"19vh":x?"8vh":"11vh",borderRadius:"4px",padding:c?"1vh":"2vh",backgroundColor:g.blueAccent[700],children:n.jsxs(f,{display:"flex",height:c?"16vh":"7vh",flexDirection:c?"column":"row",justifyContent:"space-between",alignItems:c?"center":"normal",children:[n.jsx(W,{component:"h2",variant:"h2",color:g.grey[100],fontWeight:"bold",children:i}),n.jsx(O,{action:E,api:_.TimeTableAPI,getSearchData:s,oldPagination:t,reloadBtn:b,setSearchFlag:e}),a>1&&n.jsxs(N,{type:"submit",color:"success",variant:"contained",onClick:()=>{y("/time-table/create")},sx:{height:x?"4vh":"auto"},children:["Create New ",i]})]})}),n.jsx(Q,{action:E,api:_.TimeTableAPI,getQuery:s,columns:q(),rows:o.rows,count:o.count,loading:l,selected:i,pageSizeOptions:H,setOldPagination:r,searchFlag:T,setSearchFlag:e})]})};J.propTypes={rolePriority:F.number};export{J as default};
