import{f as v,k as D,u as E,t as N,h as k,a as y,A as C,E as F,U as P,j as t,B as g,T as B,o as j,q as W,b as T,s as _}from"./index-wJj9abeo.js";import{d as I,S as M,a as $,b as q}from"./DriveFileRenameOutlineOutlined-wh212PVW.js";import{s as L}from"./SectionAction-bDNrVPg3.js";import{u as O}from"./index-ngBz0NVi.js";import"./FormControlLabel-rkyz9wHp.js";import"./Chip-3qarAbJU.js";import"./index-R3E-xKkl.js";import"./ListItemText-UY9Do7UF.js";const U=()=>{const a=v(e=>e.allFormClasses),s=v(e=>e.allFormSections),m=D(),o=E(),i=N(o.palette.mode),h=k(),{appendSuffix:p,customSort:A,createUniqueDataArray:x,findById:u}=P(),f=e=>{h(`/teacher/update/${e}`,{state:{id:e}})};return y.useEffect(()=>{var e,r;(!((e=a==null?void 0:a.listData)!=null&&e.length)||!((r=s==null?void 0:s.listData)!=null&&r.length))&&C.SchoolAPI.getSchoolClasses(5).then(n=>{if(n.status==="Success"){n.data.sort(A);const c=x(n.data,"class_id","class_name");m(F(c)),console.log(c,"config dataset");const d=x(n.data,"id","name");m(L(d)),console.log(d,"config sections")}}).catch(n=>{console.log("Error Fetching ClassData:",n)})},[a.listData.length,s.listData.length]),[{field:"fullname",headerName:"NAME",headerAlign:"center",align:"center",flex:1,minWidth:120,valueGetter:e=>`${e.row.firstname||""} ${e.row.lastname||""}`},{field:"class",headerName:"CLASS",headerAlign:"center",align:"center",flex:1,minWidth:100,renderCell:e=>{var c,d,l,w;let r=(d=u((c=e==null?void 0:e.row)==null?void 0:c.class,a==null?void 0:a.listData))==null?void 0:d.class_name,n=(w=u((l=e==null?void 0:e.row)==null?void 0:l.section,s==null?void 0:s.listData))==null?void 0:w.name;return t.jsxs("div",{children:[r?p(r):"/"," ",n]})}},{field:"contact_no",headerName:"CONTACT",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"status",headerName:"STATUS",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:e}})=>t.jsx(g,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:e==="active"?i.greenAccent[600]:i.redAccent[700],borderRadius:"4px",children:t.jsx(B,{color:i.grey[100],sx:{ml:"5px"},children:e})})},{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:e}})=>t.jsx(g,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:t.jsx(j,{color:"info",variant:"contained",onClick:()=>f(e),sx:{minWidth:"50px"},children:t.jsx(I,{})})})}]},b=a=>({type:W.SET_TEACHERS,payload:a}),z=[5,10,20],Y=()=>{const a=E(),s=k(),m=D(),o=T("(max-width:480px)"),i=T("(max-width:920px)"),h=v(l=>l.menuItems.selected),{listData:p,loading:A}=v(l=>l.allTeachers),[x,u]=y.useState({search:!1,searching:!1}),[f,S]=y.useState(),{getPaginatedData:e}=O(),{getLocalStorage:r}=P(),n=N(a.palette.mode),c=document.getElementById("reload-btn");y.useEffect(()=>{const l=r("menu");m(_(l.selected))},[]);const d=()=>{c.style.display="none",u({search:!1,searching:!1,oldPagination:f})};return t.jsxs(g,{m:"10px",position:"relative",children:[t.jsx(g,{height:o?"19vh":i?"8vh":"11vh",borderRadius:"4px",padding:o?"1vh":"2vh",backgroundColor:n.blueAccent[700],children:t.jsxs(g,{display:"flex",height:o?"16vh":"7vh",flexDirection:o?"column":"row",justifyContent:"space-between",alignItems:o?"center":"normal",children:[t.jsx(B,{component:"h2",variant:"h2",color:n.grey[100],fontWeight:"bold",children:h}),t.jsx(M,{action:b,api:C.TeacherAPI,getSearchData:e,oldPagination:f,reloadBtn:c,setSearchFlag:u}),t.jsxs(j,{type:"submit",color:"success",variant:"contained",onClick:()=>{s(`/${h.toLowerCase()}/create`)},sx:{height:i?"4vh":"auto"},children:["Create New ",h]})]})}),t.jsxs(j,{sx:{display:"none",position:"absolute",top:o?"23vh":i?"10.5vh":"16.5vh",left:o?"80vw":i?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:n.grey[100]},id:"reload-btn",type:"button",onClick:d,children:[t.jsx("span",{style:{display:"inherit",marginRight:"5px"},children:t.jsx($,{})}),"Back"]}),t.jsx(q,{action:b,api:C.TeacherAPI,getQuery:e,columns:U(),rows:p.rows,count:p.count,loading:A,selected:h,pageSizeOptions:z,setOldPagination:S,searchFlag:x,setSearchFlag:u})]})};export{Y as default};
