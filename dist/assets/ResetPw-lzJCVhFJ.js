import{l as j,h as w,O as k,v as F,w as S,a as t,j as e,b9 as C,F as A,ba as I,bb as u,z as p,bc as m,p as R,bd as E,H as N,U as T,A as B}from"./index-zLCHO5gj.js";const L=()=>{var c;const a=j(s=>s.toastInfo),f=w("(max-width:480px)"),h=w("(max-width:920px)"),{token:x}=k(),{verifyToken:g,toastAndNavigate:r,getLocalStorage:d}=T(),i=F(),n=S(),[l,M]=t.useState(!1),[b,P]=t.useState(!1);t.useEffect(()=>{var s;(s=d("auth"))!=null&&s.token&&g().then(o=>{o||r(n,!0,"info","Not a valid token.",i,"/login"),localStorage.clear()})},[(c=d("auth"))==null?void 0:c.token]);const v=s=>{const o={};return s.password?/(?=.*[A-Z])/.test(s.password)?/(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])/.test(s.password)?/(?=.*\d)/.test(s.password)||(o.password="Password must contain at least one number"):o.password="Password must contain at least one special character":o.password="Password must contain at least one capital letter":o.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(o.confirmPassword="Passwords do not match"):o.confirmPassword="Please confirm your password",o},y=s=>{P(!0),B.UserAPI.resetPassword({token:x,password:s.password}).then(o=>{o.status==="Success"&&r(n,!0,"info","Password is Reset Successfully",i,"/login")}).catch(o=>console.log(o))};return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:`url(${C})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",height:"99.9vh",width:"100vw",color:"#f5f5f5"},children:e.jsxs("div",{style:{backgroundColor:"rgb(114 171 237)",padding:"50px",borderRadius:"20px",width:"60vh"},children:[e.jsx("h4",{style:{color:"white"},children:"Create New Password"}),e.jsx(A,{initialValues:{password:"",confirmPassword:""},validate:v,onSubmit:y,validateOnChange:!0,validateOnBlur:!0,children:({isSubmitting:s})=>e.jsxs(I,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(u,{as:p,type:l?"text":"password",label:"New Password",placeholder:"Enter Password",autoComplete:"new-password",fullWidth:!0,variant:"filled",name:"password",sx:{backgroundColor:"#E9F1FA",borderRadius:"30px",overflow:"hidden"}}),e.jsx(m,{name:"password",component:"div",style:{color:"red"}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(u,{as:p,type:l?"text":"password",label:"Confirm Password",placeholder:"Confirm Password",autoComplete:"new-password",fullWidth:!0,variant:"filled",name:"confirmPassword",sx:{backgroundColor:"#E9F1FA",borderRadius:"30px",overflow:"hidden"}}),e.jsx(m,{name:"confirmPassword",component:"div",style:{color:"red"}})]}),e.jsx(R,{type:"submit",variant:"contained",color:"success",fullWidth:!0,disabled:s,sx:{color:"#F6F6F2",display:"block",mt:"2px",minWidth:f?"170px":"200px",backgroundColor:"#FF9A01",borderRadius:28},children:b===!0?e.jsx(E,{}):"Submit"})]})}),e.jsx(N,{alerting:a.toastAlert,severity:a.toastSeverity,message:a.toastMessage})]})})};export{L as default};
