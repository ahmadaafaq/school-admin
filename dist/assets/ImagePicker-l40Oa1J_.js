import{N as C,K as R,a as m,O as M,_ as I,P as O,Q as k,j as l,V as L,W as F,Y as P,r as A,i as U,b,J as N,Z as q,v as D,R as K,B as W,m as G}from"./index-wJj9abeo.js";import{L as Q}from"./Loader-V9kt_BZH.js";function T(o){return C("MuiImageList",o)}R("MuiImageList",["root","masonry","quilted","standard","woven"]);const Y=m.createContext({}),z=Y,J=["children","className","cols","component","rowHeight","gap","style","variant"],Z=o=>{const{classes:r,variant:i}=o;return F({root:["root",i]},T,r)},X=M("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:i}=o;return[r.root,r[i.variant]]}})(({ownerState:o})=>I({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},o.variant==="masonry"&&{display:"block"})),V=m.forwardRef(function(r,i){const f=O({props:r,name:"MuiImageList"}),{children:$,className:j,cols:c=2,component:h="ul",rowHeight:e="auto",gap:n=4,style:p,variant:u="standard"}=f,s=k(f,J),g=m.useMemo(()=>({rowHeight:e,gap:n,variant:u}),[e,n,u]);m.useEffect(()=>{},[]);const d=u==="masonry"?I({columnCount:c,columnGap:n},p):I({gridTemplateColumns:`repeat(${c}, 1fr)`,gap:n},p),v=I({},f,{component:h,gap:n,rowHeight:e,variant:u}),x=Z(v);return l.jsx(X,I({as:h,className:L(x.root,x[u],j),ref:i,style:d,ownerState:v},s,{children:l.jsx(z.Provider,{value:g,children:$})}))}),tt=V;function et(o){return C("MuiImageListItem",o)}const st=R("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),S=st,ot=["children","className","cols","component","rows","style"],rt=o=>{const{classes:r,variant:i}=o;return F({root:["root",i],img:["img"]},et,r)},nt=M("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:i}=o;return[{[`& .${S.img}`]:r.img},r.root,r[i.variant]]}})(({ownerState:o})=>I({display:"block",position:"relative"},o.variant==="standard"&&{display:"flex",flexDirection:"column"},o.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${S.img}`]:I({objectFit:"cover",width:"100%",height:"100%",display:"block"},o.variant==="standard"&&{height:"auto",flexGrow:1})})),at=m.forwardRef(function(r,i){const f=O({props:r,name:"MuiImageListItem"}),{children:$,className:j,cols:c=1,component:h="li",rows:e=1,style:n}=f,p=k(f,ot),{rowHeight:u="auto",gap:s,variant:g}=m.useContext(z);let d="auto";g==="woven"?d=void 0:u!=="auto"&&(d=u*e+s*(e-1));const v=I({},f,{cols:c,component:h,gap:s,rowHeight:u,rows:e,variant:g}),x=rt(v);return l.jsx(nt,I({as:h,className:L(x.root,x[g],j),ref:i,style:I({height:d,gridColumnEnd:g!=="masonry"?`span ${c}`:void 0,gridRowEnd:g!=="masonry"?`span ${e}`:void 0,marginBottom:g==="masonry"?s:void 0,breakInside:g==="masonry"?"avoid":void 0},n),ownerState:v},p,{children:m.Children.map($,a=>m.isValidElement(a)?a.type==="img"||P(a,["Image"])?m.cloneElement(a,{className:L(x.img,a.props.className)}):a:null)}))}),it=at;var w={},lt=U;Object.defineProperty(w,"__esModule",{value:!0});var H=w.default=void 0,ct=lt(A()),mt=l,ft=(0,ct.default)((0,mt.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");H=w.default=ft;var y={},ut=U;Object.defineProperty(y,"__esModule",{value:!0});var B=y.default=void 0,gt=ut(A()),ht=l,dt=(0,gt.default)((0,ht.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOffOutlined");B=y.default=dt;const vt=({formik:o,preview:r,setPreview:i,deletedImage:f=[],setDeletedImage:$,setDirty:j,imageFiles:c,imageType:h,updatedValues:e,azurePath:n,ENV:p,setInitialState:u})=>{const s=b("(max-width:480px)"),g=b("(max-width:920px)");let d=[];m.useEffect(()=>{console.log("USE EFFECT 2");const a=[];e&&e.map(t=>{t.image_src&&a.push(`${n}/${t.image_src}?${p.VITE_SAS_TOKEN}`)}),i([...a])},[e==null?void 0:e.length]);const v=a=>{const t=new FileReader;t.onloadend=()=>{d.push(t.result);const E=[];e&&e.map(_=>{_.image_src&&E.push(`${n}/${_.image_src}?${p.VITE_SAS_TOKEN}`)}),i([...E,...d])},t.readAsDataURL(a)};m.useEffect(()=>{console.log("USE EFFECT 1"),c&&(console.log("imageFiles",c),Array.from(c).forEach(t=>v(t)))},[c]),console.log("preview=>",r);const x=a=>{var E;const t=r.indexOf(a);e&&$([...f,(E=e[t])==null?void 0:E.image_src]),t>-1&&(r.splice(t,1),e&&(e.splice(t,1),u({...e}),console.log("Values after delete=>",e)),c&&(c.splice(t,1),o.setFieldValue(h,c)),i([...r]),j(!0))};return console.log("TEST updatedValues =>",e),l.jsx(tt,{sx:{width:"80%",height:"60%",overflow:"inherit",marginBottom:"8%"},cols:3,rowHeight:s?80:g?160:220,gap:8,children:r?r.map((a,t)=>l.jsxs(it,{children:[l.jsx(N,{sx:{position:"absolute",left:"87%","@media screen and (max-width: 920px)":{left:"77%"},"@media screen and (max-width: 480px)":{left:"60%"},top:"-2%"},onClick:()=>x(a),children:l.jsx(q,{title:"DELETE",children:l.jsx(B,{sx:{color:"#002147","&:hover":{color:"red",fontSize:"1.5rem",transition:"all 0.3s ease-in-out"}}})})}),l.jsx("img",{src:a,alt:"This image is not available",loading:"lazy",style:{objectFit:"cover",height:"100%",width:"100%",borderRadius:s?"6px":"12px",boxShadow:"2px 2px 4px hsl(0, 0%, 30%)"}})]},t)):l.jsx(Q,{})})},pt=({onChange:o,refId:r,setDirty:i,reset:f,setReset:$,preview:j,setPreview:c,iCardDetails:h=null,setICardDetails:e=null,updatedValues:n=null,deletedImage:p=[],setDeletedImage:u,imageType:s,azurePath:g,ENV:d})=>{const v={};v[`${s}`]=null;const[x,a]=m.useState(v),t=D({initialValues:x,enableReinitialize:!0,onSubmit:()=>E()});K.useImperativeHandle(r,()=>({Submit:async()=>{await t.submitForm()}}));const E=()=>{o&&o({values:t.values,validated:t.isSubmitting?Object.keys(t.errors).length===0:!1})};return m.useEffect(()=>{f&&(t.resetForm(),c([]),$(!1))},[f]),m.useEffect(()=>{t.dirty&&i(!0)},[t.dirty]),m.useEffect(()=>{h&&e({...h,...t.values})},[t.values]),m.useEffect(()=>{n&&(console.log("Updated Values=>",n),a(n))},[n==null?void 0:n.length]),console.log(`imagepicker formik values ${s}=>`,t.values),l.jsxs(W,{m:"10px",children:[l.jsx("form",{ref:r,encType:"multipart/form-data",children:l.jsx(G,{accept:"image/*, application/pdf",name:s,label:`Upload ${s} Image`,value:void 0,size:"small",onBlur:t.handleBlur,InputProps:{multiple:!0,startAdornment:l.jsxs(N,{component:"label",sx:{width:"88%"},children:[l.jsx(H,{}),l.jsx("input",{hidden:!0,multiple:!0,type:"file",name:"file",onChange:_=>{console.log(`Onchange picker ${s} files=>`,_.target.files),t.values[`${s}`]?t.setFieldValue(`${s}`,[...t.values[`${s}`],..._.target.files]):t.setFieldValue(`${s}`,_.target.files),i(!0)}})]})},error:t.touched[`${s}`]&&!!t.errors[`${s}`],helperText:t.touched[`${s}`]&&t.errors[`${s}`],sx:{m:1,outline:"none",width:"15%"}})}),t.values[`${s}`]||n!=null&&n.length?l.jsx(vt,{formik:t,deletedImage:p,setDeletedImage:u,setDirty:i,updatedValues:n,imageFiles:t.values[`${s}`],preview:j,setPreview:c,imageType:s,azurePath:g,ENV:d,setInitialState:a}):null]})};export{pt as I,H as d};
