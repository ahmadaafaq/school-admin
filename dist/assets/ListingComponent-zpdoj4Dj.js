import{q as oe,s as U,P as q,u as M,t as O,h as w,a as c,l as F,v as $,w as Y,x as ie,k as re,y as K,A as T,j as e,D as le,m as G,T as z,F as ce,B as h,z as Q,C as de,I as ue,S as pe,E as V,M as me,G as ge,p as I,H as he,J as xe,U as B}from"./index-zLCHO5gj.js";import{l as _,S as fe,a as be}from"./listBG-jqFZybtA.js";import{d as ye}from"./DriveFileRenameOutlineOutlined-sr1QJdZi.js";import{s as H}from"./AmenityAction-TQ2VORm6.js";import{u as ve}from"./index-mkkoW40k.js";import"./FormControlLabel-SXp-cdUw.js";import"./toPropertyKey-mta9U6ZT.js";import"./typeof-Q9eVcF_1.js";import"./ListItemText-2nz_AZOg.js";import"./CircularProgress-ieWN9mTc.js";import"./TableCell-yZ9kbJpi.js";const Se=oe().shape({name:U().min(2,"Name is Too Short!").max(40,"Name is Too Long!").required("This Field is Required"),description:U()}),J={name:"",description:"",status:"active"},X=({openDialog:S,setOpenDialog:x})=>{const i=M(),f=O(i.palette.mode),j=w(i.breakpoints.down("md")),b=w("(max-width:480px)"),y=w("(max-width:920px)"),g=()=>{x(!1)},[s,A]=c.useState("Create"),[N,o]=c.useState(!1),[D,u]=c.useState(J),P=F(a=>a.menuItems.selected),C=F(a=>a.toastInfo),d=$(),r=Y(),{state:v}=ie(),{typography:p}=re(i.palette.mode),{toastAndNavigate:m,getLocalStorage:Z}=B();let E=v==null?void 0:v.id;c.useEffect(()=>{const a=Z("menu");r(K(a.selected)),E?(A("Update"),te(E)):(A("Create"),u(J))},[E]);const ee=c.useCallback(a=>{o(!0),T.AmenityAPI.updateAmenity(a).then(({data:t})=>{(t==null?void 0:t.status)==="Success"?(o(!1),m(r,!0,"info","Successfully Updated"),setTimeout(()=>{g(),location.href="/amenity/listing"},2e3)):(o(!1),m(r,!0,"error","An Error Occurred, Please Try Again",d,location.reload()))}).catch(t=>{var n,l;throw o(!1),m(r,!0,"error",(l=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:l.msg,d,location.reload()),t})},[]),te=c.useCallback(a=>{o(!0);const t=[`/get-by-pk/amenity/${a}`];T.CommonAPI.multipleAPICall("GET",t).then(n=>{n[0].data.status==="Success"?(u(n[0].data.data),o(!1)):(o(!1),m(r,!0,"error","An Error Occurred, Please Try Again",d,location.reload()))}).catch(n=>{var l,k;throw o(!1),m(r,!0,"error",(k=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:k.msg,d,location.reload()),n})},[E]),ae=c.useCallback(a=>{o(!0),T.AmenityAPI.createAmenity(a).then(({data:t})=>{(t==null?void 0:t.status)==="Success"?(o(!1),m(r,!0,"success","Successfully Created"),setTimeout(()=>{g(),d(0)},2e3)):(o(!1),m(r,!0,"error","An Error Occurred, Please Try Again",d,location.reload()))}).catch(t=>{var n,l;throw o(!1),m(r,!0,t?(l=(n=t.response)==null?void 0:n.data)==null?void 0:l.msg:"An Error Occurred",d,location.reload()),t})},[]);return e.jsx("div",{children:e.jsxs(le,{fullScreen:j,open:S,onClose:g,"aria-labelledby":"responsive-dialog-title",sx:{top:b?"33%":y?"25%":"20%",height:b?"49%":y?"39%":"60%","& .MuiPaper-root":{width:"100%",backgroundImage:i.palette.mode=="light"?`linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url(${G})`:`linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9)), url(${G})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}},children:[e.jsx(z,{fontFamily:p.fontFamily,fontSize:p.h2.fontSize,color:f.grey[100],fontWeight:"600",display:"inline-block",textAlign:"center",marginTop:"10px",children:`${s} ${P}`}),e.jsx(ce,{initialValues:D,enableReinitialize:!0,validationSchema:Se,onSubmit:a=>{a.id?ee(a):ae(a)},children:({values:a,errors:t,touched:n,dirty:l,isSubmitting:k,handleBlur:L,handleChange:R,handleSubmit:ne,resetForm:se})=>e.jsxs("form",{onSubmit:ne,children:[e.jsxs(h,{display:"grid",gap:"30px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",padding:"20px",children:[e.jsx(Q,{variant:"filled",type:"text",name:"name",label:"Name*",autoComplete:"new-name",onBlur:L,onChange:R,value:a.name,error:!!n.name&&!!t.name,helperText:n.name&&t.name}),e.jsx(Q,{variant:"filled",type:"text",label:"Description",name:"description",autoComplete:"new-description",onBlur:L,onChange:R,value:a.description,error:!!n.description&&!!t.description,helperText:n.description&&t.description}),e.jsxs(de,{variant:"filled",sx:{minWidth:120},error:!!n.status&&!!t.status,children:[e.jsx(ue,{id:"statusField",children:"Status"}),e.jsx(pe,{variant:"filled",labelId:"statusField",label:"Status",name:"status",autoComplete:"new-status",value:a.status,onChange:R,children:Object.keys(V.status).map(W=>e.jsx(me,{value:W,children:V.status[W]},W))})]})]}),e.jsx(ge,{}),e.jsxs(h,{display:"flex",justifyContent:"end",p:"20px",children:[s==="Update"?null:e.jsx(I,{type:"reset",color:"warning",variant:"contained",sx:{mr:3},disabled:!l||k,onClick:()=>{window.confirm("Do You Really Want To Reset?")&&se()},children:"Reset"}),e.jsx(I,{color:"error",variant:"contained",sx:{mr:3},onClick:()=>g(),children:"Cancel"}),e.jsx(I,{type:"submit",disabled:!l||k,color:s==="Update"?"info":"success",variant:"contained",children:"Submit"}),e.jsx(he,{alerting:C.toastAlert,severity:C.toastSeverity,message:C.toastMessage})]})]})}),N===!0?e.jsx(xe,{}):null]})})};X.propTypes={openDialog:q.bool,setOpenDialog:q.func};const je=S=>{const x=M(),i=O(x.palette.mode),{capitalizeEveryWord:f,formatDate:j}=B(),b=$(),y=s=>{S(),b("#",{state:{id:s}})};return[{field:"name",headerName:"Name",headerAlign:"center",align:"center",flex:1,minWidth:120},{field:"description",headerName:"Description",headerAlign:"center",align:"center",flex:1,minWidth:280},{field:"updated_at",headerName:"Updated",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:s=>`${j(s.value)}`},{field:"status",headerName:"Status",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:s}})=>e.jsx(h,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:s==="active"?i.greenAccent[600]:i.redAccent[700],borderRadius:"4px",children:e.jsx(z,{color:i.grey[100],sx:{ml:"5px"},children:f(s)||""})})},{field:"action",headerName:"Action",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:s}})=>e.jsx(h,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:e.jsx(I,{color:"info",variant:"contained",onClick:()=>y(s),sx:{minWidth:"50px"},children:e.jsx(ye,{})})})}]},Ae=[5,10,20],We=()=>{const[S,x]=c.useState(!1),[i,f]=c.useState({search:!1,searching:!1}),[j,b]=c.useState(),y=$(),g=Y(),s=F(p=>p.menuItems.selected),{listData:A,loading:N}=F(p=>p.allAmenities),o=M(),D=O(o.palette.mode),u=w("(max-width:480px)"),P=w("(max-width:920px)"),C=document.getElementById("reload-btn"),{getPaginatedData:d}=ve(),{getLocalStorage:r}=B();c.useEffect(()=>{const p=r("menu");g(K(p.selected))},[]);const v=()=>{x(!0)};return e.jsxs(h,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:o.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${_})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${_})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[e.jsx(h,{height:u?"19vh":P?"8vh":"11vh",borderRadius:"4px",padding:u?"1vh":"2vh",backgroundColor:D.blueAccent[700],children:e.jsxs(h,{display:"flex",height:u?"16vh":"7vh",flexDirection:u?"column":"row",justifyContent:"space-between",alignItems:u?"center":"normal",children:[e.jsx(z,{component:"h2",variant:"h2",color:D.grey[100],fontWeight:"bold",children:s}),e.jsx(fe,{action:H,api:T.AmenityAPI,getSearchData:d,oldPagination:j,reloadBtn:C,setSearchFlag:f}),e.jsxs(I,{type:"submit",color:"success",variant:"contained",onClick:()=>{y("#",{state:{id:void 0}}),v()},sx:{height:P?"4vh":"auto"},children:["Create New ",s]})]})}),e.jsx(be,{action:H,api:T.AmenityAPI,getQuery:d,columns:je(v),rows:A.rows,count:A.count,loading:N,selected:s,pageSizeOptions:Ae,setOldPagination:b,searchFlag:i,setSearchFlag:f}),e.jsx(X,{openDialog:S,setOpenDialog:x})]})};export{We as default};
