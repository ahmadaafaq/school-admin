import{q as te,s as ae,P as R,u as U,t as W,h as P,a as r,l as O,v as M,w as q,x as ne,k as oe,y as G,A as C,j as e,D as se,m as $,T as _,F as ie,B as b,z as re,G as le,p as A,H as ce,J as de,U as N}from"./index-zLCHO5gj.js";import{l as B,S as ue,a as me}from"./listBG-jqFZybtA.js";import{d as pe}from"./DriveFileRenameOutlineOutlined-sr1QJdZi.js";import{a as L}from"./PaymentMethodAction-X7E_0a2C.js";import{u as ge}from"./index-mkkoW40k.js";import"./FormControlLabel-SXp-cdUw.js";import"./toPropertyKey-mta9U6ZT.js";import"./typeof-Q9eVcF_1.js";import"./ListItemText-2nz_AZOg.js";import"./CircularProgress-ieWN9mTc.js";import"./TableCell-yZ9kbJpi.js";const he=te().shape({name:ae().min(2,"Name is Too Short!").max(40,"Name is Too Long!").required("This Field is Required")}),z={name:""},Q=({openDialog:y,setOpenDialog:g})=>{const c=U(),h=W(c.palette.mode),T=P(c.breakpoints.down("md")),l=P("(max-width:480px)"),k=P("(max-width:920px)"),x=()=>{g(!1)},[p,S]=r.useState("Create"),[F,o]=r.useState(!1),[w,d]=r.useState(z),D=O(a=>a.menuItems.selected),v=O(a=>a.toastInfo),I=M(),s=q(),{state:f}=ne(),{typography:u}=oe(c.palette.mode),{toastAndNavigate:m,getLocalStorage:V}=N();let E=f==null?void 0:f.id;r.useEffect(()=>{const a=V("menu");s(G(a.selected)),E?(S("Update"),J(E)):(S("Create"),d(z))},[E]);const H=r.useCallback(a=>{o(!0),C.PaymentMethodAPI.updatePaymentMethod(a).then(({data:t})=>{(t==null?void 0:t.status)==="Success"?(o(!1),m(s,!0,"info","Successfully Updated"),setTimeout(()=>{x(),location.href="/payment-method/listing"},2e3)):(o(!1),m(s,!0,"error","An Error Occurred, Please Try Again"))}).catch(t=>{var n,i;o(!1),m(s,!0,"error",t?(i=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:i.msg:"An Error Occurred"),console.log("Error in payment method update",t)})},[]),J=r.useCallback(a=>{o(!0);const t=[`/get-by-pk/payment_method/${a}`];C.CommonAPI.multipleAPICall("GET",t).then(n=>{n[0].data.status==="Success"?(d(n[0].data.data),o(!1)):(o(!1),m(s,!0,"error","An Error Occurred, Please Try Again"))}).catch(n=>{var i,j;o(!1),m(s,!0,"error",n?(j=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:j.msg:"An Error Occurred"),console.log("Error in payment method populate",n)})},[E]),Y=r.useCallback(a=>{o(!0),C.PaymentMethodAPI.createPaymentMethod(a).then(({data:t})=>{(t==null?void 0:t.status)==="Success"?(o(!1),m(s,!0,"success","Successfully Created"),setTimeout(()=>{x(),I(0)},2e3)):(o(!1),m(s,!0,"error","An Error Occurred, Please Try Again"))}).catch(t=>{var n,i;o(!1),m(s,!0,t?(i=(n=t.response)==null?void 0:n.data)==null?void 0:i.msg:"An Error Occurred"),console.log("Error in payment method create",t)})},[]);return e.jsx("div",{children:e.jsxs(se,{fullScreen:T,open:y,onClose:x,"aria-labelledby":"responsive-dialog-title",sx:{top:l?"33%":k?"25%":"20%",height:l?"49%":k?"39%":"60%","& .MuiPaper-root":{width:"100%",backgroundImage:c.palette.mode=="light"?`linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url(${$})`:`linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9)), url(${$})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}},children:[e.jsx(_,{fontFamily:u.fontFamily,fontSize:u.h2.fontSize,color:h.grey[100],fontWeight:"600",display:"inline-block",textAlign:"center",marginTop:"10px",children:`${p} ${D}`}),e.jsx(ie,{initialValues:w,enableReinitialize:!0,validationSchema:he,onSubmit:a=>a.id?H(a):Y(a),children:({values:a,errors:t,touched:n,dirty:i,isSubmitting:j,handleBlur:K,handleChange:X,handleSubmit:Z,resetForm:ee})=>e.jsxs("form",{onSubmit:Z,children:[e.jsx(b,{display:"grid",gap:"30px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",padding:"20px",children:e.jsx(re,{variant:"filled",type:"text",name:"name",label:"Name*",onBlur:K,onChange:X,value:a.name,error:!!n.name&&!!t.name,helperText:n.name&&t.name,sx:{gridColumn:"span 2"}})}),e.jsx(le,{}),e.jsxs(b,{display:"flex",justifyContent:"end",p:"20px",children:[p==="Update"?null:e.jsx(A,{type:"reset",color:"warning",variant:"contained",sx:{mr:3},disabled:!i||j,onClick:()=>{window.confirm("Do You Really Want To Reset?")&&ee()},children:"Reset"}),e.jsx(A,{color:"error",variant:"contained",sx:{mr:3},onClick:()=>x(),children:"Cancel"}),e.jsx(A,{type:"submit",disabled:!i||j,color:p==="Update"?"info":"success",variant:"contained",children:"Submit"}),e.jsx(ce,{alerting:v.toastAlert,severity:v.toastSeverity,message:v.toastMessage})]})]})}),F===!0?e.jsx(de,{}):null]})})};Q.propTypes={openDialog:R.bool,setOpenDialog:R.func};const xe=y=>{const{formatDate:g}=N(),c=M(),h=l=>{y(),c("#",{state:{id:l}})};return[{field:"name",headerName:"Name",headerAlign:"center",align:"center",flex:1,minWidth:120},{field:"updated_at",headerName:"Updated",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:l=>`${g(l.value)}`},{field:"action",headerName:"Action",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:l}})=>e.jsx(b,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:e.jsx(A,{color:"info",variant:"contained",onClick:()=>h(l),sx:{minWidth:"50px"},children:e.jsx(pe,{})})})}]},fe=[5,10,20],De=()=>{const[y,g]=r.useState(!1),[c,h]=r.useState({search:!1,searching:!1}),[T,l]=r.useState(),k=M(),x=q(),p=O(u=>u.menuItems.selected),{listData:S,loading:F}=O(u=>u.listingPaymentMethods),o=U(),w=W(o.palette.mode),d=P("(max-width:480px)"),D=P("(max-width:920px)"),v=document.getElementById("reload-btn"),{getPaginatedData:I}=ge(),{getLocalStorage:s}=N();r.useEffect(()=>{const u=s("menu");x(G(u.selected))},[]);const f=()=>{g(!0)};return e.jsxs(b,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:o.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${B})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${B})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[e.jsx(b,{height:d?"19vh":D?"8vh":"11vh",borderRadius:"4px",padding:d?"1vh":"2vh",backgroundColor:w.blueAccent[700],children:e.jsxs(b,{display:"flex",height:d?"16vh":"7vh",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"center":"normal",children:[e.jsx(_,{component:"h2",variant:"h2",color:w.grey[100],fontWeight:"bold",children:p}),e.jsx(ue,{action:L,api:C.PaymentMethodAPI,getSearchData:I,oldPagination:T,reloadBtn:v,setSearchFlag:h}),e.jsxs(A,{type:"submit",color:"success",variant:"contained",onClick:()=>{k("#",{state:{id:void 0}}),f()},sx:{height:D?"4vh":"auto"},children:["Create New ",p]})]})}),e.jsx(me,{action:L,api:C.PaymentMethodAPI,getQuery:I,columns:xe(f),rows:S.rows,count:S.count,loading:F,selected:p,pageSizeOptions:fe,setOldPagination:l,searchFlag:c,setSearchFlag:h}),e.jsx(Q,{openDialog:y,setOpenDialog:g})]})};export{De as default};
