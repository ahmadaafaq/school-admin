import{q as $,s as m,Y as k,P as l,a as r,h as N,K as O,R as D,A as F,j as s,B as T,z as h,C as I,I as z,S as E,M as q,N as B}from"./index-zLCHO5gj.js";const H=$({street:m().min(4,"Too Short!").max(80,"Too Long!").matches(/^[a-zA-Z].*[a-zA-Z.,\-_=+\s]*$/,"Invalid Street Name Detected").required("This Field is Required"),landmark:m().min(4,"Too Short!").max(80,"Too Long!").matches(/[a-z]/,"Invalid Landmark Detected"),zipcode:m().min(4,"Too Short!").max(20,"Too Long!").matches(/[0-9]/,"Invalid Zipcode Detected").required("This Field is Required"),state:k().required("This Field is Required"),city:k().required("This Field is Required")}),d="2",_={street:"",landmark:"",zipcode:"",country:d,state:0,city:0},K=({onChange:f,refId:v,update:R,setDirty:w,reset:y,setReset:A,iCardDetails:n=null,setICardDetails:x=null,updatedValues:a=null})=>{var C,b;const[L,P]=r.useState(_),[g,p]=r.useState([]),[S,W]=r.useState(null),[c,o]=r.useState([]),[Q,j]=r.useState(null),M=N("(min-width:600px)"),e=O({initialValues:L,validationSchema:H,enableReinitialize:!0,onSubmit:()=>Z()});D.useImperativeHandle(v,()=>({Submit:async()=>{await e.submitForm()}}));const Z=()=>{console.log("formik. errors address>>>",e.errors),f&&f({values:e.values,validated:e.isSubmitting?Object.keys(e.errors).length===0:!1,dirty:e.dirty})};return console.log("addressform formik.errors",e.errors),r.useEffect(()=>{y&&(e.resetForm(),A(!1))},[y]),r.useEffect(()=>{e.dirty&&w(!0)},[e.dirty]),r.useEffect(()=>{a&&P(a)},[a]),r.useEffect(()=>{(()=>{(e.values.country||d)&&F.StateAPI.getStates(e.values.country||d).then(i=>{(i==null?void 0:i.status)==="Success"?(p(i.data.list),o([]),R&&getCities()):(p([]),o([]),e.setFieldValue("state",0))}).catch(i=>{throw i})})()},[e.values.country,d]),r.useEffect(()=>{console.log("get city"),F.CityAPI.getCities(e.values.state||S).then(t=>{(t==null?void 0:t.status)==="Success"?o(t.data.list):o([])}).catch(t=>{o([])})},[e.values.state,S]),r.useEffect(()=>{var t;if(e.values.state){const i=g.filter(u=>u.id===e.values.state)||[];n&&x({...n,studentState:(t=i[0])==null?void 0:t.name})}},[(C=e.values)==null?void 0:C.state]),r.useEffect(()=>{var t;if(e.values.city){const i=c.filter(u=>u.id===e.values.city)||[];n&&x({...n,studentCity:(t=i[0])==null?void 0:t.name})}},[(b=e.values)==null?void 0:b.city]),r.useEffect(()=>{c.length&&(e.setFieldValue("city",a==null?void 0:a.city),j(a==null?void 0:a.city))},[c.length]),console.log("formik.values.state",e.values.state),s.jsx(T,{m:"20px",marginBottom:"60px",children:s.jsx("form",{ref:v,children:s.jsxs(T,{display:"grid",gap:"30px",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",position:"relative",id:"box-shadow",sx:{"& > div":{gridColumn:M?void 0:"span 4"},transform:"translate(0)",transformStyle:"preserve-3d"},children:[s.jsx(h,{fullWidth:!0,variant:"filled",type:"text",name:"street",label:"Street*",autoComplete:"new-street",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.street,error:!!e.touched.street&&!!e.errors.street,helperText:e.touched.street&&e.errors.street,sx:{gridColumn:"span 2"}}),s.jsx(h,{fullWidth:!0,variant:"filled",type:"text",name:"landmark",label:"Landmark",autoComplete:"new-landmark",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.landmark,error:!!e.touched.landmark&&!!e.errors.landmark,helperText:e.touched.landmark&&e.errors.landmark,sx:{gridColumn:"span 2"}}),s.jsx(h,{fullWidth:!0,variant:"filled",type:"text",name:"zipcode",label:"Zipcode*",autoComplete:"new-zipcode",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.zipcode,error:!!e.touched.zipcode&&!!e.errors.zipcode,helperText:e.touched.zipcode&&e.errors.zipcode}),s.jsxs(I,{variant:"filled",sx:{minWidth:120},error:!!e.touched.state&&!!e.errors.state,children:[s.jsx(z,{id:"stateField",children:"--Select State*--"}),s.jsx(E,{id:"state",name:"state",variant:"filled",value:e.values.state,onChange:t=>{W(t.target.value),e.setFieldValue("state",t.target.value)},children:g.map(t=>s.jsx(q,{value:t.id,name:t.name,children:t.name},t.name))}),s.jsx(B,{children:e.touched.state&&e.errors.state})]}),s.jsxs(I,{variant:"filled",sx:{minWidth:120},error:!!e.touched.city&&!!e.errors.city,children:[s.jsx(z,{id:"cityField",children:"--Select City*--"}),s.jsx(E,{id:"city",name:"city",variant:"filled",value:e.values.city||(a==null?void 0:a.city),onChange:t=>{j(t.target.value),e.setFieldValue("city",t.target.value)},children:c.map(t=>s.jsx(q,{value:t.id,name:t.name,children:t.name},t.id))}),s.jsx(B,{children:e.touched.city&&e.errors.city})]})]})})})};K.propTypes={onChange:l.func,refId:l.shape({current:l.any}),update:l.bool,setDirty:l.func,reset:l.bool,setReset:l.func,updatedValues:l.object,iCardDetails:l.object,setICardDetails:l.func};export{K as A};
