import{k as Xe,l as R,P as k,a as l,b as $e,z as Ze,R as fe,j as t,B as K,q as _,O as le,v as Y,I as G,S as J,M as Q,C as ne,w as ea,U as Ve,m as q,n as aa,o as ta,E as sa,u as ra,t as la,d as na,p as oa,s as ia,A as p,J as ca,f as We,T as da,h as _e,x as ua,y as ha}from"./index-dsWAcX1f.js";import{A as pa}from"./AddressFormComponent-EqXGwUPp.js";import{I as Ne}from"./ImagePicker-Z9q8O9TX.js";import{c as z}from"./index-mbUFVO5S.js";import{F as ma,C as ga}from"./FormControlLabel-GbaKk4ky.js";import{s as va}from"./SectionAction-OMdiSl6G.js";import{a as ya}from"./AmenityAction-CGTCkLdN.js";import{s as ba}from"./SubjectAction-p-rplfCF.js";import{u as fa}from"./index-uKa1WJb8.js";const _a=/^((\+[1-9]{1,4}[ -]?)|(\([0-9]{2,3}\)[ -]?)|([0-9]{2,4})[ -]?)*?[0-9]{3,4}[ -]?[0-9]{3,4}$/,xa=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,ja=Xe().shape({name:R().min(2,"Firstname is Too Short!").max(50,"Firstname is Too Long!").required("This Field is Required"),email:R().matches(xa,"Email Address is Not Valid"),contact_no_1:R().matches(_a,"Phone Number Is Not Valid").required("This Field is Required"),director:R().required("This Field is Required"),principal:R().required("This Field is Required"),board:R().required("This Field is Required"),status:R()}),Ca={name:"",email:"",contact_no_1:"",contact_no_2:"",director:"",principal:"",board:"",area:"",registered_by:"",registration_year:0,amenities:[],classes:[],sections:[],subjects:[[]],is_boarding:!1,boarding_capacity:0,capacity:0,founding_year:0,affiliation_no:0,type:"",sub_type:"",status:"inactive"},Le=({onChange:V,refId:X,setDirty:oe,reset:C,setReset:B,allClasses:S,allSections:T,amenities:ie,subjectsInRedux:Z,updatedValues:L=null})=>{const[ee,ce]=l.useState(Ca),de={inputProps:{"aria-label":"Checkboxes"}},ue=$e("(min-width:600px)"),he=$e("(max-width:480px)"),{getValuesFromArray:pe}=Ve(),e=Ze({initialValues:ee,validationSchema:ja,enableReinitialize:!0,onSubmit:()=>ae()});fe.useImperativeHandle(X,()=>({Submit:async()=>{await e.submitForm()}}));const ae=()=>{V&&V({values:e.values,validated:e.isSubmitting?Object.keys(e.errors).length===0:!1})};return l.useEffect(()=>{C&&(e.resetForm(),B(!1))},[C]),l.useEffect(()=>{e.dirty&&oe(!0)},[e.dirty]),l.useEffect(()=>{if(L){const s=L.selectedClass.reduce((j,c)=>{const g=c.class_id;return j[g]||(j[g]=[]),j[g].push(c),j},{}),n=s&&Object.keys(s).length>0,x=j=>{let c=[];return j.map(g=>{let d=T==null?void 0:T.filter(I=>g.some(b=>b.section_id===I.section_id));c.push(d)}),c},E=j=>{const c=[[]];return Object.keys(j).map((g,d)=>{Object.values(j)[d].map((I,b)=>{const u=pe(I.subject_ids,Z);d>0&&b===0&&(c[d]=[]),c[d][b]=u})}),c};ce({...ee,...L.schoolData,classes:n?Object.keys(s):[],sections:n?x(Object.values(s)):[],subjects:n?E(s):[[]]})}},[L]),t.jsx(K,{m:"20px",children:t.jsxs("form",{ref:X,children:[t.jsxs(K,{display:"grid",gap:"30px",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",sx:{"& > div":{gridColumn:ue?void 0:"span 4"},marginBottom:"40px"},children:[t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"name",label:"Name*",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.name,error:!!e.touched.name&&!!e.errors.name,helperText:e.touched.name&&e.errors.name,sx:{gridColumn:"span 2"}}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",label:"Email",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.email,error:!!e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email,sx:{gridColumn:"span 2"}}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",label:"Contact Number*",name:"contact_no_1",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.contact_no_1,error:!!e.touched.contact_no_1&&!!e.errors.contact_no_1,helperText:e.touched.contact_no_1&&e.errors.contact_no_1}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",label:"Optional Contact Number",name:"contact_no_2",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.contact_no_2,error:!!e.touched.contact_no_2&&!!e.errors.contact_no_2,helperText:e.touched.contact_no_2&&e.errors.contact_no_2}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"director",label:"Director*",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.director,error:!!e.touched.director&&!!e.errors.director,helperText:e.touched.director&&e.errors.director}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"principal",label:"Principal*",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.principal,error:!!e.touched.principal&&!!e.errors.principal,helperText:e.touched.principal&&e.errors.principal}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"board",label:"Board*",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.board,error:!!e.touched.board&&!!e.errors.board,helperText:e.touched.board&&e.errors.board}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"area",label:"Area",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.area,error:!!e.touched.area&&!!e.errors.area,helperText:e.touched.area&&e.errors.area}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"registered_by",label:"Registered By",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.registered_by,error:!!e.touched.registered_by&&!!e.errors.registered_by,helperText:e.touched.registered_by&&e.errors.registered_by}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"registration_year",label:"Registration Year",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.registration_year,error:!!e.touched.registration_year&&!!e.errors.registration_year,helperText:e.touched.registration_year&&e.errors.registration_year}),t.jsx(le,{multiple:!0,options:ie||[],getOptionLabel:s=>s.name,disableCloseOnSelect:!0,value:e.values.amenities,onChange:(s,n)=>e.setFieldValue("amenities",n),sx:{gridColumn:"span 2"},renderInput:s=>t.jsx(_,{...s,variant:"filled",type:"text",name:"amenities",label:"Amenities",error:!!e.touched.amenities&&!!e.errors.amenities,helperText:e.touched.amenities&&e.errors.amenities})}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"capacity",label:"Capacity",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.capacity,error:!!e.touched.capacity&&!!e.errors.capacity,helperText:e.touched.capacity&&e.errors.capacity}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"founding_year",label:"Founding Year",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.founding_year,error:!!e.touched.founding_year&&!!e.errors.founding_year,helperText:e.touched.founding_year&&e.errors.founding_year}),t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"affiliation_no",label:"Affiliation No",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.affiliation_no,error:!!e.touched.affiliation_no&&!!e.errors.affiliation_no,helperText:e.touched.affiliation_no&&e.errors.affiliation_no}),t.jsxs(Y,{variant:"filled",sx:{minWidth:120},error:!!e.touched.type&&!!e.errors.type,children:[t.jsx(G,{id:"typeField",children:"Type"}),t.jsx(J,{variant:"filled",labelId:"typeField",name:"type",value:e.values.type,onChange:e.handleChange,children:Object.keys(z.schoolType).map(s=>t.jsx(Q,{value:s,children:z.schoolType[s]},s))}),t.jsx(ne,{children:e.touched.type&&e.errors.type})]}),t.jsxs(Y,{variant:"filled",sx:{minWidth:120},error:!!e.touched.sub_type&&!!e.errors.sub_type,children:[t.jsx(G,{id:"sub_typeField",children:"Sub Type"}),t.jsx(J,{variant:"filled",labelId:"sub_typeField",name:"sub_type",value:e.values.sub_type,onChange:s=>e.setFieldValue("sub_type",s.target.value),children:Object.keys(z.subSchoolType).map(s=>t.jsx(Q,{value:s,children:z.subSchoolType[s]},s))}),t.jsx(ne,{children:e.touched.sub_type&&e.errors.sub_type})]}),t.jsxs(Y,{variant:"filled",sx:{minWidth:120},error:!!e.touched.status&&!!e.errors.status,children:[t.jsx(G,{id:"statusField",children:"Status"}),t.jsx(J,{variant:"filled",labelId:"statusField",name:"status",value:e.values.status,onChange:e.handleChange,children:Object.keys(z.status).map(s=>t.jsx(Q,{value:s,children:z.status[s]},s))})]}),t.jsx(ma,{label:"Is Boarding",sx:{gridColumn:he?"span 2":""},control:t.jsx(ga,{...de,color:"default",checked:!!e.values.is_boarding,name:"is_boarding",onChange:(s,n)=>e.setFieldValue("is_boarding",n),value:e.values.is_boarding})}),e.values.is_boarding&&t.jsx(_,{fullWidth:!0,variant:"filled",type:"text",name:"boarding_capacity",label:"Specify Boarding Capacity",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.boarding_capacity,error:!!e.touched.boarding_capacity&&!!e.errors.boarding_capacity,helperText:e.touched.boarding_capacity&&e.errors.boarding_capacity})]}),t.jsxs(K,{border:"2px solid #BADFE7",borderRadius:"12px",display:"grid",gap:"30px",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",padding:"10px",marginBottom:"40px",children:[e.values.classes.map((s,n)=>{var E,j;let x=n+1;return t.jsxs(fe.Fragment,{children:[t.jsxs(Y,{variant:"filled",sx:{minWidth:120},error:!!e.touched.classes&&!!e.errors.classes,children:[t.jsx(G,{id:`classesField_${x}`,children:"Class"}),t.jsx(J,{variant:"filled",labelId:`classesField_${x}`,name:`classes.${x}`,value:e.values.classes[n],onChange:(c,g)=>{const d=[...e.values.classes];d[n]=g.props.value,e.setFieldValue("classes",d),e.values.sections&&e.setFieldValue("sections",[]),e.values.subjects&&e.setFieldValue("subjects",[[]])},children:S!=null&&S.length?S.map(c=>t.jsx(Q,{value:c.class_id,name:c.class_name,children:c.class_name},c.class_id)):null}),t.jsx(ne,{children:e.touched.classes&&e.errors.classes})]}),t.jsx(le,{multiple:!0,options:T||[],getOptionLabel:c=>c.section_name,disableCloseOnSelect:!0,value:e.values.sections[n],onChange:(c,g)=>{const d=[...e.values.sections];d[n]=g,e.setFieldValue("sections",d)},sx:{gridColumn:"span 2"},renderInput:c=>t.jsx(_,{...c,variant:"filled",type:"text",name:`sections.${x}`,label:"Section",error:!!e.touched.sections&&!!e.errors.sections,helperText:e.touched.sections&&e.errors.sections})}),(j=(E=e==null?void 0:e.values)==null?void 0:E.sections[n])==null?void 0:j.map((c,g)=>t.jsx(le,{multiple:!0,options:Z||[],getOptionLabel:d=>d.name,disableCloseOnSelect:!0,value:e.values.subjects[n]?e.values.subjects[n][g]||[]:[],onChange:(d,I)=>{const b=[...e.values.subjects];n>0&&g===0&&(b[n]=[]),b[n][g]=I,e.setFieldValue("subjects",b)},sx:{gridColumn:"span 2"},renderInput:d=>t.jsx(_,{...d,variant:"filled",type:"text",name:`subjects.${n}.${g}`,label:`Subjects For Section ${c.section_name}`,error:!!e.touched.subjects&&!!e.errors.subjects,helperText:e.touched.subjects&&e.errors.subjects})},x+g)),t.jsx(ea,{sx:{borderBottomWidth:0,gridColumn:"span 4"}})]},x)}),t.jsxs(fe.Fragment,{children:[t.jsxs(Y,{variant:"filled",sx:{minWidth:120},error:!!e.touched.classes&&!!e.errors.classes,children:[t.jsx(G,{id:`classesField_${e.values.classes.length+1}`,children:"Class"}),t.jsx(J,{variant:"filled",labelId:`classesField_${e.values.classes.length+1}`,name:`classes${e.values.classes.length+1}`,value:[],onChange:(s,n)=>{const x=[...e.values.classes];x[e.values.classes.length]=n.props.value,e.setFieldValue("classes",x)},children:S!=null&&S.length?S.filter(s=>!e.values.classes.includes(s.class_id)).map(s=>t.jsx(Q,{value:s.class_id,name:s.class_name,children:s.class_name},s.class_id)):null}),t.jsx(ne,{children:e.touched.classes&&e.errors.classes})]}),t.jsx(le,{multiple:!0,options:T||[],getOptionLabel:s=>s.section_name,disableCloseOnSelect:!0,value:[],onChange:(s,n)=>{const x=[...e.values.sections];x[e.values.classes.length]=n,e.setFieldValue("sections",x)},sx:{gridColumn:"span 2"},renderInput:s=>t.jsx(_,{...s,variant:"filled",type:"text",name:`sections${e.values.classes.length+1}`,label:"Section"})})]},e.values.classes.length+1)]})]})})};Le.propTypes={onChange:k.func,refId:k.shape({current:k.any}),setDirty:k.func,reset:k.bool,setReset:k.func,allClasses:k.array,allSections:k.array,amenities:k.array,subjectsInRedux:k.array,updatedValues:k.object};var Ia={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Re=Ia,Ea=()=>{var Se,Be,Te,Pe,we,ke,Ee,Oe;const[V,X]=l.useState("Create"),[oe,C]=l.useState(!1),[B,S]=l.useState({schoolData:{values:null,validated:!1},addressData:{values:null,validated:!1},imageData:{values:null,validated:!0},bannerImageData:{values:null,validated:!0}}),[T,ie]=l.useState(null),[Z,L]=l.useState([]),[ee,ce]=l.useState([]),[de,ue]=l.useState([]),[he,pe]=l.useState([]),[e,ae]=l.useState([]),[s,n]=l.useState([]),[x,E]=l.useState(!1),[j,c]=l.useState(!1),[g,d]=l.useState(!1),I=q(a=>a.allClasses),b=q(a=>a.allSections),u=q(a=>a.allSubjects),v=q(a=>a.allFormAmenities),xe=q(a=>a.menuItems.selected),me=q(a=>a.toastInfo),je=l.useRef(),Ce=l.useRef(),Ie=l.useRef(),De=l.useRef(),O=aa(),P=ta(),ge=sa(),ve=ra(),Ue=la(ve.palette.mode),{typography:Ae}=na(ve.palette.mode),{state:ye}=oa(),{getPaginatedData:Me}=fa(),{createSchoolCode:qe,formatImageName:te,getLocalStorage:ze,getIdsFromObject:se,getValuesFromArray:He,isObjEmpty:Fe,fetchAndSetAll:be,toastAndNavigate:$}=Ve();let N=(ye==null?void 0:ye.id)||(ge==null?void 0:ge.id);l.useEffect(()=>{const a=ze("menu");P(ia(a.selected))},[]);const Ye=l.useCallback(async a=>{var A,F;C(!0);const m=["/update-school","/update-address"],f=[{...a.schoolData.values,amenities:se(a.schoolData.values.amenities)},{...a.addressData.values}];try{await p.CommonAPI.multipleAPICall("PATCH",m,f)&&Ge(a)}catch(D){throw C(!1),$(P,!0,"error",D?(F=(A=D==null?void 0:D.response)==null?void 0:A.data)==null?void 0:F.msg:"An Error Occurred",O,0),D}},[B]),Ge=l.useCallback(async a=>{var f,A,F,D,W,o,y;p.ImageAPI.deleteImage({parent:"school",parent_id:N}),await p.SchoolAPI.deleteFromMappingTable({school_id:N});const m=a.schoolData.values.sections.map((i,h)=>{const r=a.schoolData.values.classes[h]||0;i.map((w,U)=>{const M=a.schoolData.values.subjects[h][U]||[];p.SchoolAPI.insertIntoMappingTable([a.schoolData.values.id,r,w.section_id,se(M,u==null?void 0:u.listData)])})});try{let i=null,h;await Promise.all(m),Fe(a.imageData.values)||((f=a.imageData.values)!=null&&f.Display&&(Array.from(a.imageData.values.Display).map(r=>{h=te(r.name),p.ImageAPI.uploadImage({image:r,imageName:h}),p.ImageAPI.createImage({image_src:h,school_id:a.schoolData.values.id,parent_id:a.schoolData.values.id,parent:"school",type:"display"})}),i=!0),(A=a.imageData)!=null&&A.values&&(a.imageData.values.map(r=>{p.ImageAPI.createImage({image_src:r.image_src,school_id:r.school_id,parent_id:r.parent_id,parent:r.parent,type:r.type})}),i=!0)),Fe(a.bannerImageData.values)?i=!0:((F=a.bannerImageData.values)!=null&&F.Banner&&(Array.from((D=a.bannerImageData.values)==null?void 0:D.Banner).map(r=>{let w=te(r.name);p.ImageAPI.uploadImage({image:r,imageName:w}),p.ImageAPI.createImage({image_src:w,school_id:a.schoolData.values.id,parent_id:a.schoolData.values.id,parent:"school",type:"banner"})}),i=!0),(W=a.bannerImageData)!=null&&W.values&&(a.bannerImageData.values.map(r=>{p.ImageAPI.createImage({image_src:r.image_src,school_id:r.school_id,parent_id:r.parent_id,parent:r.parent,type:r.type})}),i=!0)),i&&(C(!1),$(P,!0,"info","Successfully Updated",O,"/school/listing"))}catch(i){throw C(!1),$(P,!0,"error",i?(y=(o=i==null?void 0:i.response)==null?void 0:o.data)==null?void 0:y.msg:"An Error Occurred",O,0),i}},[]),Je=l.useCallback(a=>{C(!0);const m=[`/get-by-pk/school/${a}`,`/get-address/school/${a}`,`/get-image/school/${a}`];p.CommonAPI.multipleAPICall("GET",m).then(f=>{var A,F,D,W;(F=(A=f[0])==null?void 0:A.data)!=null&&F.data&&(f[0].data.data.amenities=He((D=f[0].data.data)==null?void 0:D.amenities,(W=v==null?void 0:v.listData)==null?void 0:W.rows)),p.SchoolAPI.getSchoolClasses(a).then(o=>{var i,h,r,w,U,M;const y={schoolData:{schoolData:f[0].data.data,selectedClass:o==null?void 0:o.data},addressData:(h=(i=f[1])==null?void 0:i.data)==null?void 0:h.data,imageData:(w=(r=f[2])==null?void 0:r.data)==null?void 0:w.data};ie(y),ae((U=y==null?void 0:y.imageData)==null?void 0:U.filter(H=>H.type==="display")),n((M=y==null?void 0:y.imageData)==null?void 0:M.filter(H=>H.type==="banner")),C(!1)}).catch(o=>{var y,i;C(!1),$(P,!0,"error",((i=(y=o==null?void 0:o.response)==null?void 0:y.data)==null?void 0:i.msg)||"Error fetching school classes",O,0)})}).catch(f=>{var A,F;C(!1),$(P,!0,"error",((F=(A=f==null?void 0:f.response)==null?void 0:A.data)==null?void 0:F.msg)||"Error fetching school classes",O,0)})},[(Se=v==null?void 0:v.listData)==null?void 0:Se.rows]),Qe=l.useCallback(a=>{var D,W;let m,f,A,F;C(!0),a.schoolData.values={...a.schoolData.values,school_code:qe((D=a.schoolData.values)==null?void 0:D.name),amenities:se((W=a.schoolData.values)==null?void 0:W.amenities)},p.SchoolAPI.createSchool({...a.schoolData.values}).then(({data:o})=>{var y,i;if((o==null?void 0:o.status)==="Success")return m=p.AddressAPI.createAddress({...a.addressData.values,school_id:o.data.id,parent_id:o.data.id,parent:"school"}),f=a.schoolData.values.sections.map((h,r)=>{const w=a.schoolData.values.classes[r]||0;h.map((U,M)=>{const H=a.schoolData.values.subjects[r][M]||[];p.SchoolAPI.insertIntoMappingTable([o.data.id,w,U.section_id,se(H,u==null?void 0:u.listData)])})}),(y=a.imageData.values.Display)!=null&&y.length&&(A=Array.from(a.imageData.values.Display).map(async h=>{let r=te(h.name);p.ImageAPI.uploadImage({image:h,imageName:r}),p.ImageAPI.createImage({image_src:r,school_id:o.data.id,parent_id:o.data.id,parent:"school",type:"display"})})),(i=a.bannerImageData.values.Banner)!=null&&i.length&&(F=Array.from(a.bannerImageData.values.Banner).map(async h=>{let r=te(h.name);p.ImageAPI.uploadImage({image:h,imageName:r}),p.ImageAPI.createImage({image_src:r,school_id:o.data.id,parent_id:o.data.id,parent:"school",type:"banner"})})),Promise.all([m,f,A,F]).then(()=>{C(!1),$(P,!0,"success","Successfully Created",O,"/school/listing")}).catch(h=>{var r,w;throw C(!1),$(P,!0,"error",h?(w=(r=h==null?void 0:h.response)==null?void 0:r.data)==null?void 0:w.msg:"An Error Occurred",O,0),h})}).catch(o=>{var y,i;throw C(!1),$(P,!0,"error",o?(i=(y=o==null?void 0:o.response)==null?void 0:y.data)==null?void 0:i.msg:"An Error Occurred",O,0),o})},[]);l.useEffect(()=>{var a,m;(m=(a=v==null?void 0:v.listData)==null?void 0:a.rows)!=null&&m.length||Me(0,50,ya,p.AmenityAPI)},[(Te=(Be=v==null?void 0:v.listData)==null?void 0:Be.rows)==null?void 0:Te.length]),l.useEffect(()=>{var a;(a=u==null?void 0:u.listData)!=null&&a.length||be(P,ba,p.SubjectAPI)},[(Pe=u==null?void 0:u.listData)==null?void 0:Pe.length]),l.useEffect(()=>{var a;(a=I==null?void 0:I.listData)!=null&&a.length||be(P,ca,p.ClassAPI)},[(we=I==null?void 0:I.listData)==null?void 0:we.length]),l.useEffect(()=>{var a;(a=b==null?void 0:b.listData)!=null&&a.length||be(P,va,p.SectionAPI)},[(ke=b==null?void 0:b.listData)==null?void 0:ke.length]),l.useEffect(()=>{var a,m;N&&!j&&((a=v==null?void 0:v.listData)!=null&&a.rows)&&(u!=null&&u.listData)&&(X("Update"),Je(N)),B.schoolData.validated&&B.addressData.validated?(m=B.schoolData.values)!=null&&m.id?Ye(B):Qe(B):c(!1)},[N,j,(Ee=v==null?void 0:v.listData)==null?void 0:Ee.rows,u==null?void 0:u.listData]);const Ke=async()=>{var a,m;await je.current.Submit(),await Ce.current.Submit(),await((a=Ie.current)==null?void 0:a.Submit()),await((m=De.current)==null?void 0:m.Submit()),c(!0)},re=(a,m)=>{m==="school"?S({...B,schoolData:a}):m==="address"?S({...B,addressData:a}):m==="display"?S({...B,imageData:a}):m==="banner"&&S({...B,bannerImageData:a})};return t.jsxs(K,{m:"10px",sx:{backgroundImage:ve.palette.mode=="light"?`linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url(${We})`:`linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9)), url(${We})`,backgroundRepeat:"no-repeat",backgroundPosition:"start",backgroundSize:"cover",backgroundAttachment:"fixed"},children:[t.jsx(da,{fontFamily:Ae.fontFamily,fontSize:Ae.h2.fontSize,color:Ue.grey[100],fontWeight:"bold",display:"inline-block",marginLeft:"20px",children:`${V} ${xe}`}),t.jsx(Le,{onChange:a=>{re(a,"school")},refId:je,setDirty:E,reset:g,setReset:d,schoolId:N,allClasses:I==null?void 0:I.listData,allSections:b==null?void 0:b.listData,amenities:(Oe=v==null?void 0:v.listData)==null?void 0:Oe.rows,subjectsInRedux:u==null?void 0:u.listData,updatedValues:T==null?void 0:T.schoolData}),t.jsx(pa,{onChange:a=>{re(a,"address")},refId:Ce,update:!!N,setDirty:E,reset:g,setReset:d,updatedValues:T==null?void 0:T.addressData}),t.jsx(Ne,{onChange:a=>re(a,"display"),refId:Ie,reset:g,setReset:d,setDirty:E,preview:ee,setPreview:ce,updatedImage:e,setUpdatedImage:ae,deletedImage:Z,setDeletedImage:L,imageType:"Display",multiple:!0,ENV:Re},"image"),t.jsx(Ne,{onChange:a=>re(a,"banner"),refId:De,reset:g,setReset:d,setDirty:E,preview:he,setPreview:pe,updatedImage:s,setUpdatedImage:n,deletedImage:de,setDeletedImage:ue,imageType:"Banner",multiple:!0,ENV:Re},"banner"),t.jsxs(K,{display:"flex",justifyContent:"end",m:"20px",children:[V==="Update"?null:t.jsx(_e,{type:"reset",color:"warning",variant:"contained",sx:{mr:3},disabled:!x||j,onClick:()=>{window.confirm("Do You Really Want To Reset?")&&d(!0)},children:"Reset"}),t.jsx(_e,{color:"error",variant:"contained",sx:{mr:3},onClick:()=>O(`/${xe.toLowerCase()}/listing`),children:"Cancel"}),t.jsx(_e,{type:"submit",onClick:()=>Ke(),disabled:!x,color:V==="Update"?"info":"success",variant:"contained",children:"Submit"}),t.jsx(ua,{alerting:me.toastAlert,severity:me.toastSeverity,message:me.toastMessage})]}),oe===!0?t.jsx(ha,{}):null]})};export{Ea as default};
