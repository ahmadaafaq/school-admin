import{a2 as M,a1 as O,a as h,a3 as U,a4 as x,a5 as V,a6 as A,j as c,a7 as $,a8 as F,aa as T,r as z,i as B,k as G,ab as W,P as o,b as E,Z as N,$ as Z,y as Q,z as X,R as Y,B as J,q as K}from"./index-dsWAcX1f.js";function ee(t){return M("MuiImageList",t)}O("MuiImageList",["root","masonry","quilted","standard","woven"]);const P=h.createContext({}),te=["children","className","cols","component","rowHeight","gap","style","variant"],se=t=>{const{classes:a,variant:i}=t;return F({root:["root",i]},ee,a)},oe=U("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[a.root,a[i.variant]]}})(({ownerState:t})=>x({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},t.variant==="masonry"&&{display:"block"})),ae=h.forwardRef(function(a,i){const v=V({props:a,name:"MuiImageList"}),{children:b,className:j,cols:d=2,component:f="ul",rowHeight:p="auto",gap:n=4,style:w,variant:s="standard"}=v,g=A(v,te),m=h.useMemo(()=>({rowHeight:p,gap:n,variant:s}),[p,n,s]);h.useEffect(()=>{},[]);const r=s==="masonry"?x({columnCount:d,columnGap:n},w):x({gridTemplateColumns:`repeat(${d}, 1fr)`,gap:n},w),u=x({},v,{component:f,gap:n,rowHeight:p,variant:s}),e=se(u);return c.jsx(oe,x({as:f,className:$(e.root,e[s],j),ref:i,style:r,ownerState:u},g,{children:c.jsx(P.Provider,{value:m,children:b})}))}),re=ae;function ne(t){return M("MuiImageListItem",t)}const ie=O("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),k=ie,le=["children","className","cols","component","rows","style"],ce=t=>{const{classes:a,variant:i}=t;return F({root:["root",i],img:["img"]},ne,a)},ue=U("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:i}=t;return[{[`& .${k.img}`]:a.img},a.root,a[i.variant]]}})(({ownerState:t})=>x({display:"block",position:"relative"},t.variant==="standard"&&{display:"flex",flexDirection:"column"},t.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${k.img}`]:x({objectFit:"cover",width:"100%",height:"100%",display:"block"},t.variant==="standard"&&{height:"auto",flexGrow:1})})),de=h.forwardRef(function(a,i){const v=V({props:a,name:"MuiImageListItem"}),{children:b,className:j,cols:d=1,component:f="li",rows:p=1,style:n}=v,w=A(v,le),{rowHeight:s="auto",gap:g,variant:m}=h.useContext(P);let r="auto";m==="woven"?r=void 0:s!=="auto"&&(r=s*p+g*(p-1));const u=x({},v,{cols:d,component:f,gap:g,rowHeight:s,rows:p,variant:m}),e=ce(u);return c.jsx(ue,x({as:f,className:$(e.root,e[m],j),ref:i,style:x({height:r,gridColumnEnd:m!=="masonry"?`span ${d}`:void 0,gridRowEnd:m!=="masonry"?`span ${p}`:void 0,marginBottom:m==="masonry"?g:void 0,breakInside:m==="masonry"?"avoid":void 0},n),ownerState:u},w,{children:h.Children.map(b,l=>h.isValidElement(l)?l.type==="img"||T(l,["Image"])?h.cloneElement(l,{className:$(e.img,l.props.className)}):l:null)}))}),fe=de;var L={},me=B;Object.defineProperty(L,"__esModule",{value:!0});var q=L.default=void 0,he=me(z()),ve=c;q=L.default=(0,he.default)((0,ve.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate");const pe=1024e4,S=["jpg","gif","png","jpeg","svg","webp"];function xe(t){const a=t.split(".").pop().toLowerCase();return console.log(a,"valu extens"),console.log(S.includes(a),"valu extens"),S.includes(a)}const ge=G().shape({Student:W().required("This Field is Required").test("is-valid-type","Invalid file type",t=>t.length?(console.log(t,"valida"),xe(t[0].name)):!0).test("is-valid-size","Max allowed size is 1MB",t=>t.length?t[0].size<=pe:!0)});var R={},ye=B;Object.defineProperty(R,"__esModule",{value:!0});var D=R.default=void 0,we=ye(z()),be=c;D=R.default=(0,we.default)((0,be.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOffOutlined");const H=({formik:t,preview:a,setPreview:i,deletedImage:v=[],setDeletedImage:b,setDirty:j,imageFiles:d,imageType:f,ENV:p,updatedImage:n,setUpdatedImage:w})=>{const s=E("(max-width:480px)"),g=E("(max-width:920px)");h.useEffect(()=>{const r=[],u=[];if(n){let e=0;n.map(l=>{l.image_src&&r.push({key:"old",index:e,value:`${p.VITE_BASE_URL}/get-uploaded-image/${l.image_src}`}),e++})}if(d){let e=Array.from(d),l=0;for(const y of e)u.push({key:"new",index:l,value:URL.createObjectURL(y)}),l++}i([...r,...u])},[n==null?void 0:n.length,d,i]),h.useEffect(()=>{if(d){const r=[],u=[];let e=Array.from(d),l=0;for(const y of e)r.push({key:"new",index:l,value:URL.createObjectURL(y)}),l++;if(n){let y=0;n.map(I=>{I.image_src&&(u.push({key:"old",index:y,value:`${p.VITE_BASE_URL}/get-uploaded-image/${I.image_src}`}),y++)})}i([...u,...r])}},[d,i,n]);const m=r=>{var e;const u=a.indexOf(r);if(a.splice(u,1),(r==null?void 0:r.index)>-1){if(d&&r.key==="new"){const l=Array.from(d);l.splice(r.index,1),t.setFieldValue(f,l)}n&&r.key==="old"&&(n.splice(r.index,1),w(n)),j(!0)}n&&b([...v,(e=n[u])==null?void 0:e.image_src])};return c.jsx(re,{sx:{width:"80%",height:"60%",overflow:"inherit",marginBottom:"8%"},cols:3,rowHeight:s?80:g?160:220,gap:8,children:a?a.map((r,u)=>c.jsxs(fe,{children:[c.jsx(N,{sx:{position:"absolute",left:"87%","@media screen and (max-width: 920px)":{left:"77%"},"@media screen and (max-width: 480px)":{left:"60%"},top:"-2%"},onClick:()=>m(r),children:c.jsx(Z,{title:"DELETE",children:c.jsx(D,{sx:{color:"#002147","&:hover":{color:"red",fontSize:"1.5rem",transition:"all 0.3s ease-in-out"}}})})}),c.jsx("img",{src:r.value,alt:"This image is not available",loading:"lazy",style:{objectFit:"cover",height:"100%",width:"100%",borderRadius:s?"6px":"12px",boxShadow:"2px 2px 4px hsl(0, 0%, 30%)"}})]},u)):c.jsx(Q,{})})};H.propTypes={formik:o.shape({current:o.any}),setDirty:o.func,preview:o.array,setPreview:o.func,imageFiles:o.array,updatedImage:o.array,setUpdatedImage:o.func,deletedImage:o.array,setDeletedImage:o.func,imageType:o.string,ENV:o.object};const C={},je=({onChange:t,refId:a,setDirty:i,reset:v,setReset:b,preview:j,setPreview:d,updatedImage:f=[],setUpdatedImage:p,deletedImage:n=[],setDeletedImage:w,imageType:s,ENV:g,multiple:m=!1})=>{var y;C[`${s}`]=null;const[r,u]=h.useState(C),e=X({initialValues:r,validationSchema:ge,enableReinitialize:!0,onSubmit:()=>l()});Y.useImperativeHandle(a,()=>({Submit:async()=>{await e.submitForm()}}));const l=()=>{t&&t({values:e.values,validated:e.isSubmitting?Object.keys(e.errors).length===0:!1})};return h.useEffect(()=>{v&&(e.resetForm(),d([]),b(!1))},[v]),h.useEffect(()=>{e.dirty&&i(!0)},[e.dirty]),h.useEffect(()=>{f!=null&&f.length&&u(f)},[f==null?void 0:f.length]),console.log(Object.keys(e.errors),"formik image"),c.jsxs(J,{m:"10px",children:[m||e.values[`${s}`]===void 0||!((y=e.values[`${s}`])!=null&&y.length)?c.jsx("form",{ref:a,encType:"multipart/form-data",children:c.jsx(K,{accept:"image/*, application/pdf",name:s,label:`Upload ${s} Image`,value:void 0,size:"small",onBlur:e.handleBlur,InputProps:{multiple:m,startAdornment:c.jsxs(N,{component:"label",sx:{width:"88%"},children:[c.jsx(q,{}),c.jsx("input",{hidden:!0,multiple:m,type:"file",name:"file",onChange:I=>{const _=Array.from(I.target.files);Array.isArray(e.values[`${s}`])?e.setFieldValue(`${s}`,[...e.values[`${s}`],..._]):e.setFieldValue(`${s}`,_),i(!0)}})]})},error:e.touched[`${s}`]&&!!e.errors[`${s}`],helperText:e.touched[`${s}`]&&e.errors[`${s}`],sx:{m:1,outline:"none",width:"13%"}})}):null,c.jsx(H,{formik:e,deletedImage:n,setDeletedImage:w,setDirty:i,updatedImage:f,setUpdatedImage:p,imageFiles:e.values[`${s}`],preview:j,setPreview:d,imageType:s,ENV:g})]})};je.propTypes={onChange:o.func,refId:o.shape({current:o.any}),setDirty:o.func,reset:o.bool,setReset:o.func,preview:o.array,setPreview:o.func,updatedImage:o.array,setUpdatedImage:o.func,deletedImage:o.array,setDeletedImage:o.func,imageType:o.string,ENV:o.object,multiple:o.bool};export{je as I,D as a,q as d};
