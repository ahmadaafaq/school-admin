import{k as oe,l as U,P as z,u as M,t as W,b as P,a as d,m as E,n as $,o as H,p as ie,d as re,s as J,A as D,j as e,D as le,f as q,T as B,F as ce,B as g,q as _,v as de,I as ue,S as pe,M as me,w as he,h as A,x as ge,y as xe,U as K}from"./index-dsWAcX1f.js";import{d as fe,l as G,S as be,a as ye,b as ve}from"./listBG-dw88K66u.js";import{c as Q}from"./index-mbUFVO5S.js";import{s as V}from"./AmenityAction-CGTCkLdN.js";import{u as Ae}from"./index-uKa1WJb8.js";import"./FormControlLabel-GbaKk4ky.js";import"./toPropertyKey-Z1a84DJL.js";import"./typeof-LnL08gqA.js";import"./CircularProgress-4dZqOr9B.js";const je=oe().shape({name:U().min(2,"Name is Too Short!").max(40,"Name is Too Long!").required("This Field is Required"),description:U()}),Y={name:"",description:"",status:"inactive"},X=({openDialog:j,setOpenDialog:x})=>{const r=M(),m=W(r.palette.mode),f=P(r.breakpoints.down("md")),S=P("(max-width:480px)"),s=P("(max-width:920px)"),b=()=>{x(!1)},[h,C]=d.useState("Create"),[N,o]=d.useState(!1),[T,u]=d.useState(Y),y=E(a=>a.menuItems.selected),v=E(a=>a.toastInfo),p=$(),l=H(),{state:w}=ie(),{typography:k}=re(r.palette.mode),{toastAndNavigate:i,getLocalStorage:Z}=K();let R=w==null?void 0:w.id;d.useEffect(()=>{const a=Z("menu");l(J(a.selected)),R?(C("Update"),te(R)):(C("Create"),u(Y))},[R]);const ee=d.useCallback(a=>{o(!0),D.AmenityAPI.updateAmenity(a).then(({data:t})=>{(t==null?void 0:t.status)==="Success"?(o(!1),i(l,!0,"info","Successfully Updated"),setTimeout(()=>{b(),location.href="/amenity/listing"},2e3)):(o(!1),i(l,!0,"error","An Error Occurred, Please Try Again",p,location.reload()))}).catch(t=>{var n,c;throw o(!1),i(l,!0,"error",(c=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:c.msg,p,location.reload()),t})},[]),te=d.useCallback(a=>{o(!0);const t=[`/get-by-pk/amenity/${a}`];D.CommonAPI.multipleAPICall("GET",t).then(n=>{n[0].data.status==="Success"?(u(n[0].data.data),o(!1)):(o(!1),i(l,!0,"error","An Error Occurred, Please Try Again",p,location.reload()))}).catch(n=>{var c,I;throw o(!1),i(l,!0,"error",(I=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:I.msg,p,location.reload()),n})},[R]),ae=d.useCallback(a=>{o(!0),D.AmenityAPI.createAmenity(a).then(({data:t})=>{(t==null?void 0:t.status)==="Success"?(o(!1),i(l,!0,"success","Successfully Created"),setTimeout(()=>{b(),p(0)},2e3)):(o(!1),i(l,!0,"error","An Error Occurred, Please Try Again",p,location.reload()))}).catch(t=>{var n,c;throw o(!1),i(l,!0,t?(c=(n=t.response)==null?void 0:n.data)==null?void 0:c.msg:"An Error Occurred",p,location.reload()),t})},[]);return e.jsx("div",{children:e.jsxs(le,{fullScreen:f,open:j,onClose:b,"aria-labelledby":"responsive-dialog-title",sx:{top:S?"33%":s?"25%":"20%",height:S?"49%":s?"39%":"60%","& .MuiPaper-root":{width:"100%",backgroundImage:r.palette.mode=="light"?`linear-gradient(rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.85)), url(${q})`:`linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9)), url(${q})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}},children:[e.jsx(B,{fontFamily:k.fontFamily,fontSize:k.h2.fontSize,color:m.grey[100],fontWeight:"600",display:"inline-block",textAlign:"center",marginTop:"10px",children:`${h} ${y}`}),e.jsx(ce,{initialValues:T,enableReinitialize:!0,validationSchema:je,onSubmit:a=>{a.id?ee(a):ae(a)},children:({values:a,errors:t,touched:n,dirty:c,isSubmitting:I,handleBlur:L,handleChange:F,handleSubmit:ne,resetForm:se})=>e.jsxs("form",{onSubmit:ne,children:[e.jsxs(g,{display:"grid",gap:"30px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",padding:"20px",children:[e.jsx(_,{variant:"filled",type:"text",name:"name",label:"Name*",autoComplete:"new-name",onBlur:L,onChange:F,value:a.name,error:!!n.name&&!!t.name,helperText:n.name&&t.name}),e.jsx(_,{variant:"filled",type:"text",label:"Description",name:"description",autoComplete:"new-description",onBlur:L,onChange:F,value:a.description,error:!!n.description&&!!t.description,helperText:n.description&&t.description}),e.jsxs(de,{variant:"filled",sx:{minWidth:120},error:!!n.status&&!!t.status,children:[e.jsx(ue,{id:"statusField",children:"Status"}),e.jsx(pe,{variant:"filled",labelId:"statusField",label:"Status",name:"status",autoComplete:"new-status",value:a.status,onChange:F,children:Object.keys(Q.status).map(O=>e.jsx(me,{value:O,children:Q.status[O]},O))})]})]}),e.jsx(he,{}),e.jsxs(g,{display:"flex",justifyContent:"end",p:"20px",children:[h==="Update"?null:e.jsx(A,{type:"reset",color:"warning",variant:"contained",sx:{mr:3},disabled:!c||I,onClick:()=>{window.confirm("Do You Really Want To Reset?")&&se()},children:"Reset"}),e.jsx(A,{color:"error",variant:"contained",sx:{mr:3},onClick:()=>b(),children:"Cancel"}),e.jsx(A,{type:"submit",disabled:!c||I,color:h==="Update"?"info":"success",variant:"contained",children:"Submit"}),e.jsx(ge,{alerting:v.toastAlert,severity:v.toastSeverity,message:v.toastMessage})]})]})}),N===!0?e.jsx(xe,{}):null]})})};X.propTypes={openDialog:z.bool,setOpenDialog:z.func};const Se=j=>{const x=M(),r=W(x.palette.mode),m=$(),f=s=>{j(),m("#",{state:{id:s}})};return[{field:"name",headerName:"NAME",headerAlign:"center",align:"center",flex:1,minWidth:120},{field:"description",headerName:"DESCRIPTION",headerAlign:"center",align:"center",flex:1,minWidth:280},{field:"updated_at",headerName:"UPDATED AT",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:s=>s==null?void 0:s.value.substring(0,10)},{field:"status",headerName:"STATUS",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:s}})=>e.jsx(g,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:s==="active"?r.greenAccent[600]:r.redAccent[700],borderRadius:"4px",children:e.jsx(B,{color:r.grey[100],sx:{ml:"5px"},children:s})})},{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:s}})=>e.jsx(g,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:e.jsx(A,{color:"info",variant:"contained",onClick:()=>f(s),sx:{minWidth:"50px"},children:e.jsx(fe,{})})})}]},Ce=[5,10,20],Fe=()=>{const[j,x]=d.useState(!1),[r,m]=d.useState({search:!1,searching:!1}),[f,S]=d.useState(),s=$(),b=H(),h=E(i=>i.menuItems.selected),{listData:C,loading:N}=E(i=>i.allAmenities),o=M(),T=W(o.palette.mode),u=P("(max-width:480px)"),y=P("(max-width:920px)"),v=document.getElementById("reload-btn"),{getPaginatedData:p}=Ae(),{getLocalStorage:l}=K();d.useEffect(()=>{const i=l("menu");b(J(i.selected))},[]);const w=()=>{v.style.display="none",m({search:!1,searching:!1,oldPagination:f})},k=()=>{x(!0)};return e.jsxs(g,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:o.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${G})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${G})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[e.jsx(g,{height:u?"19vh":y?"8vh":"11vh",borderRadius:"4px",padding:u?"1vh":"2vh",backgroundColor:T.blueAccent[700],children:e.jsxs(g,{display:"flex",height:u?"16vh":"7vh",flexDirection:u?"column":"row",justifyContent:"space-between",alignItems:u?"center":"normal",children:[e.jsx(B,{component:"h2",variant:"h2",color:T.grey[100],fontWeight:"bold",children:h}),e.jsx(be,{action:V,api:D.AmenityAPI,getSearchData:p,oldPagination:f,reloadBtn:v,setSearchFlag:m}),e.jsxs(A,{type:"submit",color:"success",variant:"contained",onClick:()=>{s("#",{state:{id:void 0}}),k()},sx:{height:y?"4vh":"auto"},children:["Create New ",h]})]})}),e.jsxs(A,{sx:{display:"none",position:"absolute",top:u?"23vh":y?"10.5vh":"16.5vh",left:u?"80vw":y?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:T.grey[100]},id:"reload-btn",type:"button",onClick:w,children:[e.jsx("span",{style:{display:"inherit",marginRight:"5px"},children:e.jsx(ye,{})}),"Back"]}),e.jsx(ve,{action:V,api:D.AmenityAPI,getQuery:p,columns:Se(k),rows:C.rows,count:C.count,loading:N,selected:h,pageSizeOptions:Ce,setOldPagination:S,searchFlag:r,setSearchFlag:m}),e.jsx(X,{openDialog:j,setOpenDialog:x})]})};export{Fe as default};
