import{m as g,o as G,n as Q,u as J,t as K,a as y,J as V,A as D,K as X,U as q,j as n,B as b,T as H,h as C,b as z,s as Y,P as Z}from"./index-dsWAcX1f.js";import{d as ee,l as O,S as te,a as ne,b as ae}from"./listBG-dw88K66u.js";import{s as ie,a as oe}from"./SectionAction-OMdiSl6G.js";import{s as F}from"./TeacherAction-MaPUeMMF.js";import{u as re}from"./index-uKa1WJb8.js";import"./FormControlLabel-GbaKk4ky.js";import"./toPropertyKey-Z1a84DJL.js";import"./typeof-LnL08gqA.js";import"./CircularProgress-4dZqOr9B.js";const se=(v=null)=>{var m,w,l,P;const t=g(e=>e.schoolClasses),a=g(e=>e.allClasses),o=g(e=>e.schoolSections),i=g(e=>e.allSections),u=G(),j=Q(),r=J(),s=K(r.palette.mode),{appendSuffix:I,findById:c,fetchAndSetAll:x,fetchAndSetSchoolData:T,getLocalStorage:f}=q(),k=e=>{j(`/teacher/update/${e}`,{state:{id:e}})};return y.useEffect(()=>{var e,d,h,p;f("schoolInfo")||((e=a==null?void 0:a.listData)!=null&&e.length||x(u,V,D.ClassAPI),(d=i==null?void 0:i.listData)!=null&&d.length||x(u,ie,D.SectionAPI)),f("schoolInfo")&&(!((h=t==null?void 0:t.listData)!=null&&h.length)||!((p=o==null?void 0:o.listData)!=null&&p.length))&&T(u,X,oe)},[(m=t==null?void 0:t.listData)==null?void 0:m.length,(w=o==null?void 0:o.listData)==null?void 0:w.length,(l=a==null?void 0:a.listData)==null?void 0:l.length,(P=i==null?void 0:i.listData)==null?void 0:P.length]),[{field:"fullname",headerName:"Name",headerAlign:"center",align:"center",flex:1,minWidth:120,valueGetter:e=>`${e.row.firstname.charAt(0).toUpperCase()+e.row.firstname.slice(1)||""} ${e.row.lastname.charAt(0).toUpperCase()+e.row.lastname.slice(1)||""}`},{field:"class",headerName:"Class",headerAlign:"center",align:"center",flex:1,minWidth:100,renderCell:e=>{var p,S,N,B,R,W,_,$,E,U,L,M;let d,h;return(p=a==null?void 0:a.listData)!=null&&p.length||(S=i==null?void 0:i.listData)!=null&&S.length?(d=(B=c((N=e==null?void 0:e.row)==null?void 0:N.class,a==null?void 0:a.listData))==null?void 0:B.class_name,h=(W=c((R=e==null?void 0:e.row)==null?void 0:R.section,i==null?void 0:i.listData))==null?void 0:W.section_name):((_=t==null?void 0:t.listData)!=null&&_.length||($=o==null?void 0:o.listData)!=null&&$.length)&&(d=(U=c((E=e==null?void 0:e.row)==null?void 0:E.class,t==null?void 0:t.listData))==null?void 0:U.class_name,h=(M=c((L=e==null?void 0:e.row)==null?void 0:L.section,o==null?void 0:o.listData))==null?void 0:M.section_name),n.jsxs("div",{children:[d?I(d):"/"," ",h]})}},{field:"contact_no",headerName:"Contact",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"status",headerName:"STATUS",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:e}})=>n.jsx(b,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:e==="active"?s.greenAccent[600]:s.redAccent[700],borderRadius:"4px",children:n.jsx(H,{color:s.grey[100],sx:{ml:"5px"},children:e.charAt(0).toUpperCase()+e.slice(1)||""})})},v!==1&&{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:e}})=>n.jsx(b,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:n.jsx(C,{color:"info",variant:"contained",onClick:()=>k(e),sx:{minWidth:"50px"},children:n.jsx(ee,{})})})}]},ce=[5,10,20],le=({rolePriority:v=null})=>{const t=g(l=>l.menuItems.selected),{listData:a,loading:o}=g(l=>l.allTeachers),i=J(),u=Q(),j=G(),r=z("(max-width:480px)"),s=z("(max-width:920px)"),[I,c]=y.useState({search:!1,searching:!1}),[x,T]=y.useState(),{getPaginatedData:f}=re(),{getLocalStorage:k}=q(),A=K(i.palette.mode),m=document.getElementById("reload-btn"),w=()=>{m.style.display="none",c({search:!1,searching:!1,oldPagination:x})};return y.useEffect(()=>{const l=k("menu");j(Y(l.selected))},[]),n.jsxs(b,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:i.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${O})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${O})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[n.jsx(b,{height:r?"19vh":s?"8vh":"11vh",borderRadius:"4px",padding:r?"1vh":"2vh",backgroundColor:A.blueAccent[700],children:n.jsxs(b,{display:"flex",height:r?"16vh":"7vh",flexDirection:r?"column":"row",justifyContent:"space-between",alignItems:r?"center":"normal",children:[n.jsx(H,{component:"h2",variant:"h2",color:A.grey[100],fontWeight:"bold",children:t}),n.jsx(te,{action:F,api:D.TeacherAPI,getSearchData:f,oldPagination:x,reloadBtn:m,setSearchFlag:c}),v>1&&n.jsxs(C,{type:"submit",color:"success",variant:"contained",onClick:()=>{u(`/${t.toLowerCase()}/create`)},sx:{height:s?"4vh":"auto"},children:["Create New ",t]})]})}),n.jsxs(C,{sx:{display:"none",position:"absolute",top:r?"23vh":s?"10.5vh":"16.5vh",left:r?"80vw":s?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:A.grey[100],marginLeft:"14vh"},id:"reload-btn",type:"button",onClick:w,children:[n.jsx("span",{style:{display:"inherit",marginRight:"5px"},children:n.jsx(ne,{})}),"Back"]}),n.jsx(ae,{action:F,api:D.TeacherAPI,getQuery:f,columns:se(v),rows:a.rows,count:a.count,loading:o,selected:t,pageSizeOptions:ce,setOldPagination:T,searchFlag:I,setSearchFlag:c})]})};le.propTypes={rolePriority:Z.number};export{le as default};
