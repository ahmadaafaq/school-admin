import{N as C,K as R,a as m,O as M,_ as I,P as O,Q as k,j as l,V as y,W as F,Y as z,r as A,i as U,b,J as N,Z as q,v as D,R as K,B as W,m as G}from"./index-j0XQm0-z.js";import{L as Q}from"./Loader-qLG1U33i.js";function T(o){return C("MuiImageList",o)}R("MuiImageList",["root","masonry","quilted","standard","woven"]);const B=m.createContext({}),Y=["children","className","cols","component","rowHeight","gap","style","variant"],J=o=>{const{classes:r,variant:a}=o;return F({root:["root",a]},T,r)},Z=M("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:a}=o;return[r.root,r[a.variant]]}})(({ownerState:o})=>I({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},o.variant==="masonry"&&{display:"block"})),X=m.forwardRef(function(r,a){const f=O({props:r,name:"MuiImageList"}),{children:$,className:j,cols:c=2,component:h="ul",rowHeight:e="auto",gap:n=4,style:p,variant:u="standard"}=f,s=k(f,Y),g=m.useMemo(()=>({rowHeight:e,gap:n,variant:u}),[e,n,u]);m.useEffect(()=>{},[]);const d=u==="masonry"?I({columnCount:c,columnGap:n},p):I({gridTemplateColumns:`repeat(${c}, 1fr)`,gap:n},p),v=I({},f,{component:h,gap:n,rowHeight:e,variant:u}),x=J(v);return l.jsx(Z,I({as:h,className:y(x.root,x[u],j),ref:a,style:d,ownerState:v},s,{children:l.jsx(B.Provider,{value:g,children:$})}))}),V=X;function tt(o){return C("MuiImageListItem",o)}const et=R("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),S=et,st=["children","className","cols","component","rows","style"],ot=o=>{const{classes:r,variant:a}=o;return F({root:["root",a],img:["img"]},tt,r)},rt=M("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:a}=o;return[{[`& .${S.img}`]:r.img},r.root,r[a.variant]]}})(({ownerState:o})=>I({display:"block",position:"relative"},o.variant==="standard"&&{display:"flex",flexDirection:"column"},o.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${S.img}`]:I({objectFit:"cover",width:"100%",height:"100%",display:"block"},o.variant==="standard"&&{height:"auto",flexGrow:1})})),nt=m.forwardRef(function(r,a){const f=O({props:r,name:"MuiImageListItem"}),{children:$,className:j,cols:c=1,component:h="li",rows:e=1,style:n}=f,p=k(f,st),{rowHeight:u="auto",gap:s,variant:g}=m.useContext(B);let d="auto";g==="woven"?d=void 0:u!=="auto"&&(d=u*e+s*(e-1));const v=I({},f,{cols:c,component:h,gap:s,rowHeight:u,rows:e,variant:g}),x=ot(v);return l.jsx(rt,I({as:h,className:y(x.root,x[g],j),ref:a,style:I({height:d,gridColumnEnd:g!=="masonry"?`span ${c}`:void 0,gridRowEnd:g!=="masonry"?`span ${e}`:void 0,marginBottom:g==="masonry"?s:void 0,breakInside:g==="masonry"?"avoid":void 0},n),ownerState:v},p,{children:m.Children.map($,i=>m.isValidElement(i)?i.type==="img"||z(i,["Image"])?m.cloneElement(i,{className:y(x.img,i.props.className)}):i:null)}))}),it=nt;var L={},at=U;Object.defineProperty(L,"__esModule",{value:!0});var H=L.default=void 0,lt=at(A()),ct=l;H=L.default=(0,lt.default)((0,ct.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate");var _={},mt=U;Object.defineProperty(_,"__esModule",{value:!0});var P=_.default=void 0,ft=mt(A()),ut=l;P=_.default=(0,ft.default)((0,ut.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOffOutlined");const gt=({formik:o,preview:r,setPreview:a,deletedImage:f=[],setDeletedImage:$,setDirty:j,imageFiles:c,imageType:h,updatedValues:e,azurePath:n,ENV:p,setInitialState:u})=>{const s=b("(max-width:480px)"),g=b("(max-width:920px)");let d=[];m.useEffect(()=>{console.log("USE EFFECT 2");const i=[];e&&e.map(t=>{t.image_src&&i.push(`${n}/${t.image_src}?${p.VITE_SAS_TOKEN}`)}),a([...i])},[e==null?void 0:e.length]);const v=i=>{const t=new FileReader;t.onloadend=()=>{d.push(t.result);const E=[];e&&e.map(w=>{w.image_src&&E.push(`${n}/${w.image_src}?${p.VITE_SAS_TOKEN}`)}),a([...E,...d])},t.readAsDataURL(i)};m.useEffect(()=>{console.log("USE EFFECT 1"),c&&(console.log("imageFiles",c),Array.from(c).forEach(t=>v(t)))},[c]),console.log("preview=>",r);const x=i=>{var E;const t=r.indexOf(i);e&&$([...f,(E=e[t])==null?void 0:E.image_src]),t>-1&&(r.splice(t,1),e&&(e.splice(t,1),u({...e}),console.log("Values after delete=>",e)),c&&(c.splice(t,1),o.setFieldValue(h,c)),a([...r]),j(!0))};return console.log("TEST updatedValues =>",e),l.jsx(V,{sx:{width:"80%",height:"60%",overflow:"inherit",marginBottom:"8%"},cols:3,rowHeight:s?80:g?160:220,gap:8,children:r?r.map((i,t)=>l.jsxs(it,{children:[l.jsx(N,{sx:{position:"absolute",left:"87%","@media screen and (max-width: 920px)":{left:"77%"},"@media screen and (max-width: 480px)":{left:"60%"},top:"-2%"},onClick:()=>x(i),children:l.jsx(q,{title:"DELETE",children:l.jsx(P,{sx:{color:"#002147","&:hover":{color:"red",fontSize:"1.5rem",transition:"all 0.3s ease-in-out"}}})})}),l.jsx("img",{src:i,alt:"This image is not available",loading:"lazy",style:{objectFit:"cover",height:"100%",width:"100%",borderRadius:s?"6px":"12px",boxShadow:"2px 2px 4px hsl(0, 0%, 30%)"}})]},t)):l.jsx(Q,{})})},vt=({onChange:o,refId:r,setDirty:a,reset:f,setReset:$,preview:j,setPreview:c,iCardDetails:h=null,setICardDetails:e=null,updatedValues:n=null,deletedImage:p=[],setDeletedImage:u,imageType:s,azurePath:g,ENV:d})=>{const v={};v[`${s}`]=null;const[x,i]=m.useState(v),t=D({initialValues:x,enableReinitialize:!0,onSubmit:()=>E()});K.useImperativeHandle(r,()=>({Submit:async()=>{await t.submitForm()}}));const E=()=>{o&&o({values:t.values,validated:t.isSubmitting?Object.keys(t.errors).length===0:!1})};return m.useEffect(()=>{f&&(t.resetForm(),c([]),$(!1))},[f]),m.useEffect(()=>{t.dirty&&a(!0)},[t.dirty]),m.useEffect(()=>{h&&e({...h,...t.values})},[t.values]),m.useEffect(()=>{n&&(console.log("Updated Values=>",n),i(n))},[n==null?void 0:n.length]),console.log(`imagepicker formik values ${s}=>`,t.values),l.jsxs(W,{m:"10px",children:[l.jsx("form",{ref:r,encType:"multipart/form-data",children:l.jsx(G,{accept:"image/*, application/pdf",name:s,label:`Upload ${s} Image`,value:void 0,size:"small",onBlur:t.handleBlur,InputProps:{multiple:!0,startAdornment:l.jsxs(N,{component:"label",sx:{width:"88%"},children:[l.jsx(H,{}),l.jsx("input",{hidden:!0,multiple:!0,type:"file",name:"file",onChange:w=>{console.log(`Onchange picker ${s} files=>`,w.target.files),t.values[`${s}`]?t.setFieldValue(`${s}`,[...t.values[`${s}`],...w.target.files]):t.setFieldValue(`${s}`,w.target.files),a(!0)}})]})},error:t.touched[`${s}`]&&!!t.errors[`${s}`],helperText:t.touched[`${s}`]&&t.errors[`${s}`],sx:{m:1,outline:"none",width:"15%"}})}),t.values[`${s}`]||n!=null&&n.length?l.jsx(gt,{formik:t,deletedImage:p,setDeletedImage:u,setDirty:a,updatedValues:n,imageFiles:t.values[`${s}`],preview:j,setPreview:c,imageType:s,azurePath:g,ENV:d,setInitialState:i}):null]})};export{vt as I,H as d};
