import{a1 as Pe,a2 as Te,a3 as F,a4 as z,a as N,a5 as ke,a6 as Ie,T as R,j as a,a7 as Re,a8 as Me,r as be,i as ve,P as _,m as T,u as K,V as $e,Z as Ue,B as h,w as Be,U as Q,o as Z,p as Ee,A as I,D as He,n as Ce,t as Ne,J as Oe,K as We,h as V,E as Le,b as je,s as Ge}from"./index-dsWAcX1f.js";import{l as q,d as ze,S as Ve,c as qe,a as Fe,b as Qe}from"./listBG-dw88K66u.js";import{C as Je,b as Ke,a as Ze}from"./styles-ZLiHULil.js";import{s as Xe,a as Ye}from"./SectionAction-OMdiSl6G.js";import{a as De}from"./StudentAction-ladqeq7I.js";import{u as ea}from"./index-uKa1WJb8.js";import"./FormControlLabel-GbaKk4ky.js";import"./toPropertyKey-Z1a84DJL.js";import"./typeof-LnL08gqA.js";import"./CircularProgress-4dZqOr9B.js";function aa(e){return Te("MuiCardHeader",e)}const sa=Pe("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ye=sa,ta=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],na=e=>{const{classes:i}=e;return Me({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},aa,i)},ra=F("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,i)=>z({[`& .${ye.title}`]:i.title,[`& .${ye.subheader}`]:i.subheader},i.root)})({display:"flex",alignItems:"center",padding:16}),oa=F("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,i)=>i.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),ca=F("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,i)=>i.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),ia=F("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,i)=>i.content})({flex:"1 1 auto"}),la=N.forwardRef(function(i,o){const n=ke({props:i,name:"MuiCardHeader"}),{action:c,avatar:r,className:y,component:A="div",disableTypography:g=!1,subheader:v,subheaderTypographyProps:C,title:p,titleTypographyProps:f}=n,w=Ie(n,ta),m=z({},n,{component:A,disableTypography:g}),u=na(m);let j=p;j!=null&&j.type!==R&&!g&&(j=a.jsx(R,z({variant:r?"body2":"h5",className:u.title,component:"span",display:"block"},f,{children:j})));let b=v;return b!=null&&b.type!==R&&!g&&(b=a.jsx(R,z({variant:r?"body2":"body1",className:u.subheader,color:"text.secondary",component:"span",display:"block"},C,{children:b}))),a.jsxs(ra,z({className:Re(u.root,y),as:A,ref:o,ownerState:m},w,{children:[r&&a.jsx(oa,{className:u.avatar,ownerState:m,children:r}),a.jsxs(ia,{className:u.content,ownerState:m,children:[j,b]}),c&&a.jsx(ca,{className:u.action,ownerState:m,children:c})]}))}),da=la;var X={},pa=ve;Object.defineProperty(X,"__esModule",{value:!0});var Ae=X.default=void 0,ua=pa(be()),ha=a;Ae=X.default=(0,ua.default)((0,ha.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");var ma={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const xa=ma,Se=({detail:e=null,countryData:i,stateData:o,cityData:n,onClose:c=null})=>{var u,j,b,t,P,l,x,s,D,d,S,k,M,$,U,B,E,H,O,W,L,G,ee,ae,se,te,ne,re,oe,ce,ie,le,de,pe,ue,he,me,xe,ge,fe;const r=T(J=>J.schoolSections),y=T(J=>J.schoolClasses),A=K(),{findById:g,appendSuffix:v}=Q(),C=(j=g((u=e==null?void 0:e.addressData)==null?void 0:u.country,i))==null?void 0:j.name,p=(t=g((b=e==null?void 0:e.addressData)==null?void 0:b.state,o))==null?void 0:t.name,f=(l=g((P=e==null?void 0:e.addressData)==null?void 0:P.city,n))==null?void 0:l.name,w=(s=g((x=e==null?void 0:e.studentData)==null?void 0:x.section,r==null?void 0:r.listData))==null?void 0:s.section_name,m=(d=g((D=e==null?void 0:e.studentData)==null?void 0:D.class,y==null?void 0:y.listData))==null?void 0:d.class_name;return a.jsxs(Je,{sx:{backgroundImage:A.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${q})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${q})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[a.jsx(da,{avatar:a.jsx($e,{sx:{background:"darkcyan"},"aria-label":"recipe",children:"i"}),action:a.jsx(Ue,{"aria-label":"settings",onClick:c,sx:{padding:"13px"},children:a.jsx(Ae,{})}),title:a.jsx(R,{variant:"h3",component:"h2",sx:{fontWeight:"bold"},children:"Student Details"}),sx:{backgroundColor:"cyan",margin:"5px",borderRadius:"5px"}}),a.jsxs(Ke,{children:[a.jsx(Ze,{component:"img",height:"230",image:`${xa.VITE_BASE_URL}/get-uploaded-image/${(e==null?void 0:e.imageData)&&((S=e==null?void 0:e.imageData[0])==null?void 0:S.image_src)}`,alt:(k=e==null?void 0:e.studentData)==null?void 0:k.firstname,sx:{width:"200px",float:"left",margin:"20px",border:"1px dotted black"}}),a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Session:"}),a.jsx("span",{className:"normal-text1",children:(M=e==null?void 0:e.studentData)==null?void 0:M.session}),a.jsx("span",{className:"heading-text1",children:"Name:"}),a.jsxs("span",{className:"normal-text1",children:[(($=e==null?void 0:e.studentData)==null?void 0:$.firstname.charAt(0).toUpperCase())+((U=e==null?void 0:e.studentData)==null?void 0:U.firstname.slice(1))," ",((B=e==null?void 0:e.studentData)==null?void 0:B.lastname.charAt(0).toUpperCase())+((E=e==null?void 0:e.studentData)==null?void 0:E.lastname.slice(1))]}),a.jsx("span",{className:"heading-text1",children:"Class:"}),a.jsxs("span",{className:"normal-text1",children:[m?v(m):""," ",w]}),a.jsx("span",{className:"heading-text1",children:"DOB:"}),a.jsx("span",{className:"normal-text1",children:(H=e==null?void 0:e.studentData)==null?void 0:H.dob}),a.jsx("span",{className:"heading-text1",children:"Addmission Date:"}),a.jsx("span",{className:"normal-text1",children:(O=e==null?void 0:e.studentData)==null?void 0:O.admission_date}),a.jsx("span",{className:"heading-text1",children:"Blood Group:"}),a.jsx("span",{className:"normal-text1",children:(W=e==null?void 0:e.studentData)==null?void 0:W.blood_group}),a.jsx("span",{className:"heading-text1",children:"Address:"}),a.jsxs("span",{className:"normal-text1",children:[(L=e==null?void 0:e.addressData)==null?void 0:L.street,", ",(G=e==null?void 0:e.addressData)==null?void 0:G.landmark,", ",f,", ",p,", ",C," - ",(ee=e==null?void 0:e.addressData)==null?void 0:ee.zipcode]})]}),a.jsx(Be,{sx:{margin:"10px"}}),a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px",margin:"10px"},children:[a.jsxs(h,{children:[((ae=e==null?void 0:e.studentData)==null?void 0:ae.father_name)&&a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:" Father Name :"}),a.jsx("span",{className:"normal-text1",children:((se=e==null?void 0:e.studentData)==null?void 0:se.father_name.charAt(0).toUpperCase())+((te=e==null?void 0:e.studentData)==null?void 0:te.father_name.slice(1))})]}),((ne=e==null?void 0:e.studentData)==null?void 0:ne.mother_name)&&a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Mother Name :"}),a.jsx("span",{className:"normal-text1",children:((re=e==null?void 0:e.studentData)==null?void 0:re.mother_name.charAt(0).toUpperCase())+((oe=e==null?void 0:e.studentData)==null?void 0:oe.mother_name.slice(1))})]}),((ce=e==null?void 0:e.studentData)==null?void 0:ce.guardian)&&a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Guardian :"}),a.jsx("span",{className:"normal-text1",children:((ie=e==null?void 0:e.studentData)==null?void 0:ie.guardian.charAt(0).toUpperCase())+((le=e==null?void 0:e.studentData)==null?void 0:le.guardian.slice(1))})]}),a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Phone :"}),a.jsx("span",{className:"normal-text1",children:(de=e==null?void 0:e.studentData)==null?void 0:de.contact_no})]}),a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Email :"}),a.jsx("span",{className:"normal-text1",children:(pe=e==null?void 0:e.studentData)==null?void 0:pe.email})]})]}),a.jsxs(h,{children:[a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Religion :"}),a.jsx("span",{className:"normal-text1",children:((ue=e==null?void 0:e.studentData)==null?void 0:ue.religion.charAt(0).toUpperCase())+((he=e==null?void 0:e.studentData)==null?void 0:he.religion.slice(1))})]}),a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Caste Group :"}),a.jsx("span",{className:"normal-text1",children:((me=e==null?void 0:e.studentData)==null?void 0:me.caste_group.charAt(0).toUpperCase())+((xe=e==null?void 0:e.studentData)==null?void 0:xe.caste_group.slice(1))})]}),a.jsxs(h,{sx:{display:"grid",gridTemplateColumns:"5fr 5.5fr",gap:"10px"},children:[a.jsx("span",{className:"heading-text1",children:"Gender :"}),a.jsx("span",{className:"normal-text1",children:((ge=e==null?void 0:e.studentData)==null?void 0:ge.gender.charAt(0).toUpperCase())+((fe=e==null?void 0:e.studentData)==null?void 0:fe.gender.slice(1))})]})]})]})]})]})};Se.propTypes={detail:_.oneOfType([_.object,_.array]),countryData:_.array,stateData:_.array,cityData:_.array,onClose:_.func};const _e=({open:e,setOpen:i})=>{const[o,n]=N.useState([]),[c,r]=N.useState([]),[y,A]=N.useState([]),[g,v]=N.useState([]),C=T(t=>t.allSubjects),p=Z(),{state:f}=Ee(),{toastAndNavigate:w,findMultipleById:m}=Q();let u=f==null?void 0:f.id;const j=()=>{i(!1)},b=t=>{const P=[`/get-by-pk/student/${t}`,`/get-address/student/${t}`,`/get-image/student/${t}`];I.CommonAPI.multipleAPICall("GET",P).then(l=>{var s,D,d,S,k;l[0].data.data&&(l[0].data.data.subjects=m(l[0].data.data.subjects,(s=C==null?void 0:C.listData)==null?void 0:s.rows));const x={studentData:l[0].data.data,addressData:(d=(D=l[1])==null?void 0:D.data)==null?void 0:d.data,imageData:(k=(S=l[2])==null?void 0:S.data)==null?void 0:k.data};n(x)}).catch(l=>{var x,s;throw w(p,!0,"error",l?(s=(x=l==null?void 0:l.response)==null?void 0:x.data)==null?void 0:s.msg:"An Error Occurred"),l})};return N.useEffect(()=>{u&&(b(u),I.CountryAPI.getCountries().then(t=>{t.status==="Success"&&r(t.data.list)}).catch(t=>{throw t}),I.StateAPI.getAllStates().then(t=>{t.status==="Success"&&A(t.data.rows)}).catch(t=>{throw t}),I.CityAPI.getAllCities().then(t=>{t.status==="Success"&&v(t.data.rows)}).catch(t=>{throw t}))},[u]),a.jsx(He,{open:e,onClose:j,BackdropProps:{style:{backgroundColor:"rgba(0, 0, 0, 0.3)",opacity:.5}},fullWidth:!0,maxWidth:"md",children:a.jsx(h,{children:a.jsx(Se,{detail:o,countryData:c,stateData:y,cityData:g,onClose:j})})})};_e.propTypes={open:_.bool,setOpen:_.func};var Y={},ga=ve;Object.defineProperty(Y,"__esModule",{value:!0});var we=Y.default=void 0,fa=ga(be()),ja=a;we=Y.default=(0,fa.default)((0,ja.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");const Da=(e=null,i=null)=>{var t,P,l,x;const o=T(s=>s.schoolClasses),n=T(s=>s.allClasses),c=T(s=>s.schoolSections),r=T(s=>s.allSections),y=Z(),A=Ce(),g=K(),v=Ne(g.palette.mode),{appendSuffix:C,findById:p,fetchAndSetAll:f,fetchAndSetSchoolData:w,getLocalStorage:m}=Q(),u=s=>{A(`/student/update/${s}`,{state:{id:s}})},j=s=>{i(!0),A("#",{state:{id:s}})};return N.useEffect(()=>{var s,D,d,S;m("schoolInfo")||((s=n==null?void 0:n.listData)!=null&&s.length||f(y,Oe,I.ClassAPI),(D=r==null?void 0:r.listData)!=null&&D.length||f(y,Xe,I.SectionAPI)),m("schoolInfo")&&(!((d=o==null?void 0:o.listData)!=null&&d.length)||!((S=c==null?void 0:c.listData)!=null&&S.length))&&w(y,We,Ye)},[(t=o==null?void 0:o.listData)==null?void 0:t.length,(P=c==null?void 0:c.listData)==null?void 0:P.length,(l=n==null?void 0:n.listData)==null?void 0:l.length,(x=r==null?void 0:r.listData)==null?void 0:x.length]),[{field:"fullname",headerName:"Name",headerAlign:"center",align:"center",flex:1,minWidth:120,valueGetter:s=>`${s.row.firstname.charAt(0).toUpperCase()+s.row.firstname.slice(1)||""} ${s.row.lastname.charAt(0).toUpperCase()+s.row.lastname.slice(1)||""}`},{field:"class",headerName:"Class",headerAlign:"center",align:"center",flex:1,minWidth:100,renderCell:s=>{var S,k,M,$,U,B,E,H,O,W,L,G;let D,d;return(S=n==null?void 0:n.listData)!=null&&S.length||(k=r==null?void 0:r.listData)!=null&&k.length?(D=($=p((M=s==null?void 0:s.row)==null?void 0:M.class,n==null?void 0:n.listData))==null?void 0:$.class_name,d=(B=p((U=s==null?void 0:s.row)==null?void 0:U.section,r==null?void 0:r.listData))==null?void 0:B.section_name):((E=o==null?void 0:o.listData)!=null&&E.length||(H=c==null?void 0:c.listData)!=null&&H.length)&&(D=(W=p((O=s==null?void 0:s.row)==null?void 0:O.class,o==null?void 0:o.listData))==null?void 0:W.class_name,d=(G=p((L=s==null?void 0:s.row)==null?void 0:L.section,c==null?void 0:c.listData))==null?void 0:G.section_name),a.jsxs("div",{children:[D?C(D):"/"," ",d]})}},{field:"blood_group",headerName:"Blood Group",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"dob",headerName:"Date of Birth",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"status",headerName:"STATUS",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:s}})=>a.jsx(h,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:s==="active"?v.greenAccent[600]:v.redAccent[700],borderRadius:"4px",children:a.jsx(R,{color:v.grey[100],sx:{ml:"5px"},children:s.charAt(0).toUpperCase()+s.slice(1)||""})})},{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:s}})=>a.jsxs(h,{width:"85%",m:"0 auto",p:"5px",display:"flex",justifyContent:"space-around",children:[e!==1&&a.jsx(V,{color:"info",variant:"contained",onClick:()=>u(s),sx:{minWidth:"50px"},children:a.jsx(ze,{})}),a.jsx(V,{color:"info",variant:"contained",onClick:()=>j(s),sx:{minWidth:"50px"},children:a.jsx(we,{})})]})}]},ya=[5,10,20],ba=({rolePriority:e=null})=>{const[i,o]=N.useState(!1),n=T(d=>d.menuItems.selected),{listData:c,loading:r}=T(d=>d.allStudents),y=K(),A=Ce(),g=Z(),v=Le(),C=Ne(y.palette.mode),p=je("(max-width:480px)"),f=je("(max-width:920px)"),[w,m]=N.useState({search:!1,searching:!1}),[u,j]=N.useState(),{getPaginatedData:b}=ea(),{getLocalStorage:t,setLocalStorage:P}=Q(),l=document.getElementById("reload-btn"),x=v?v.classId:null;let s=x?{classId:x}:null;if(e===5){const d=t("auth").id;s={...s,parentId:d}}const D=()=>{l.style.display="none",m({search:!1,searching:!1,oldPagination:u})};return N.useEffect(()=>{const d=t("menu");g(Ge(d.selected))},[]),N.useEffect(()=>{x&&P("class",x)},[x]),a.jsxs(h,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:y.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${q})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${q})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[a.jsx(h,{height:p?"19vh":f?"8vh":"11vh",borderRadius:"4px",padding:p?"1vh":"2vh",backgroundColor:C.blueAccent[700],children:a.jsxs(h,{display:"flex",height:p?"16vh":"7vh",flexDirection:p?"column":"row",justifyContent:"space-between",alignItems:p?"center":"normal",children:[a.jsx(R,{component:"h2",variant:"h2",color:C.grey[100],fontWeight:"bold",children:n}),a.jsx(Ve,{action:De,api:I.StudentAPI,getSearchData:b,oldPagination:u,reloadBtn:l,setSearchFlag:m}),e>1&&a.jsx(V,{type:"submit",color:"success",variant:"contained",onClick:()=>{A("/student/create")},sx:{height:f?"4vh":"auto"},children:qe.includes(n)?"Admission":`Create New ${n}`})]})}),a.jsxs(V,{sx:{display:"none",position:"absolute",top:p?"23vh":f?"10.5vh":"16.5vh",left:p?"80vw":f?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:C.grey[100],marginLeft:"14vh"},id:"reload-btn",type:"button",onClick:D,children:[a.jsx("span",{style:{display:"inherit",marginRight:"5px"},children:a.jsx(Fe,{})}),"Back"]}),a.jsx(Qe,{action:De,api:I.StudentAPI,getQuery:b,columns:Da(e,o),condition:s,rows:c.rows,count:c.count,loading:r,selected:n,pageSizeOptions:ya,setOldPagination:j,searchFlag:w,setSearchFlag:m}),a.jsx(_e,{open:i,setOpen:o})]})};ba.propTypes={rolePriority:_.number};export{ba as default};
