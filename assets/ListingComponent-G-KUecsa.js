import{m as u,n as B,j as t,B as v,h as w,U as E,N as R,u as $,o as M,b as _,a as j,t as L,s as z,T as O,A as C,P as U}from"./index-dsWAcX1f.js";import{d as F,l as N,S as G,a as Q,b as W}from"./listBG-dw88K66u.js";import{u as q}from"./index-uKa1WJb8.js";import"./FormControlLabel-GbaKk4ky.js";import"./toPropertyKey-Z1a84DJL.js";import"./typeof-LnL08gqA.js";import"./CircularProgress-4dZqOr9B.js";const H=()=>{const a=u(e=>e.schoolClasses),i=u(e=>e.allClasses),s=u(e=>e.schoolSections),l=u(e=>e.allSections),m=B(),{appendSuffix:T,findById:d}=E(),r=(e,n,o)=>{m(`/time-table/update/${e}/${n}`,{state:{class_id:e,section_id:n,day:o}})};return[{field:"class_id",headerName:"Class",headerAlign:"center",align:"center",flex:1,renderCell:e=>{var b,x,f,h,p,y,c,A,D,k,I,S;let n,o;return(b=i==null?void 0:i.listData)!=null&&b.length||(x=l==null?void 0:l.listData)!=null&&x.length?(n=(h=d((f=e==null?void 0:e.row)==null?void 0:f.class_id,i==null?void 0:i.listData))==null?void 0:h.class_name,o=(y=d((p=e==null?void 0:e.row)==null?void 0:p.section_id,l==null?void 0:l.listData))==null?void 0:y.section_name):((c=a==null?void 0:a.listData)!=null&&c.length||(A=s==null?void 0:s.listData)!=null&&A.length)&&(n=(k=d((D=e==null?void 0:e.row)==null?void 0:D.class_id,a==null?void 0:a.listData))==null?void 0:k.class_name,o=(S=d((I=e==null?void 0:e.row)==null?void 0:I.section_id,s==null?void 0:s.listData))==null?void 0:S.section_name),t.jsxs("div",{children:[n?T(n):"/"," ",o]})}},{field:"day",headerName:"Day",headerAlign:"center",align:"center",flex:1,valueGetter:e=>`${e.row.day.charAt(0).toUpperCase()+e.row.day.slice(1)||""} `},{field:"subject_id",headerName:"Subject",headerAlign:"center",align:"center",flex:1},{field:"duration",headerName:"Duration",headerAlign:"center",align:"center",flex:1},{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,renderCell:({row:{class_id:e,section_id:n,day:o}})=>t.jsx(v,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:t.jsx(w,{color:"info",variant:"contained",onClick:()=>r(e,n,o),sx:{minWidth:"50px"},children:t.jsx(F,{})})})}]},P=a=>({type:R.SET_TIME_TABLES,payload:a}),J=[5,10,20],K=({rolePriority:a=null})=>{const i=u(c=>c.menuItems.selected),{listData:s,loading:l}=u(c=>c.allTimeTables),m=$(),T=B(),d=M(),r=_("(max-width:480px)"),g=_("(max-width:920px)"),[e,n]=j.useState({search:!1,searching:!1}),[o,b]=j.useState(),{getPaginatedData:x}=q(),{getLocalStorage:f}=E(),h=L(m.palette.mode),p=document.getElementById("reload-btn"),y=()=>{p.style.display="none",n({search:!1,searching:!1,oldPagination:o})};return j.useEffect(()=>{const c=f("menu");d(z(c.selected))},[]),t.jsxs(v,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:m.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${N})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${N})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[t.jsx(v,{height:r?"19vh":g?"8vh":"11vh",borderRadius:"4px",padding:r?"1vh":"2vh",backgroundColor:h.blueAccent[700],children:t.jsxs(v,{display:"flex",height:r?"16vh":"7vh",flexDirection:r?"column":"row",justifyContent:"space-between",alignItems:r?"center":"normal",children:[t.jsx(O,{component:"h2",variant:"h2",color:h.grey[100],fontWeight:"bold",children:i}),t.jsx(G,{action:P,api:C.TimeTableAPI,getSearchData:x,oldPagination:o,reloadBtn:p,setSearchFlag:n}),a>1&&t.jsxs(w,{type:"submit",color:"success",variant:"contained",onClick:()=>{T("/time-table/create")},sx:{height:g?"4vh":"auto"},children:["Create New ",i]})]})}),t.jsxs(w,{sx:{display:"none",position:"absolute",top:r?"23vh":g?"10.5vh":"16.5vh",left:r?"80vw":g?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:h.grey[100],marginLeft:"14vh"},id:"reload-btn",type:"button",onClick:y,children:[t.jsx("span",{style:{display:"inherit",marginRight:"5px"},children:t.jsx(Q,{})}),"Back"]}),t.jsx(W,{action:P,api:C.TimeTableAPI,getQuery:x,columns:H(),rows:s.rows,count:s.count,loading:l,selected:i,pageSizeOptions:J,setOldPagination:b,searchFlag:e,setSearchFlag:n})]})};K.propTypes={rolePriority:U.number};export{K as default};
