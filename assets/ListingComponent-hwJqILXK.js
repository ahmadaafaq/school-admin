import{a as o,u as b,t as E,k as v,h as I,m as f,j as t,B as l,T as N,p as C,U as P,A as k,b as B,d as T,s as W}from"./index-OIGegECp.js";import{d as D,u as R,S as L,a as $,b as M}from"./index-v6jWwFZw.js";import"./FormControlLabel-Gd057uS1.js";import"./Autocomplete-RPy4K-aw.js";import"./index-6c-u7hMX.js";const _=()=>{const[r,x]=o.useState([]),[m,s]=o.useState([]),c=b(),n=E(c.palette.mode),d=v(e=>e.menuItems.selected),p=I(),{appendSuffix:i,findClassById:h,findSectionById:A}=P(),u=e=>{p(`/${d.toLowerCase()}/update/${e}`,{state:{id:e}})};return o.useEffect(()=>{f.ClassAPI.getAll(!1,0,20).then(e=>{e.status==="Success"?x(e.data.rows):console.error("Error fetching classes. Please Try Again")}).catch(e=>{console.error("Error fetching classes:",e)})},[]),o.useEffect(()=>{f.SectionAPI.getAll(!1,0,20).then(e=>{e.status==="Success"?s(e.data.rows):console.error("Error fetching classes. Please Try Again")}).catch(e=>{console.error("Error fetching classes:",e)})},[]),[{field:"fullname",headerName:"NAME",headerAlign:"center",align:"center",flex:1,minWidth:120,valueGetter:e=>`${e.row.firstname||""} ${e.row.lastname||""}`},{field:"class",headerName:"CLASS",headerAlign:"center",align:"center",flex:1,minWidth:100,renderCell:e=>{var a,w;let g=h((a=e==null?void 0:e.row)==null?void 0:a.class,r),y=A((w=e==null?void 0:e.row)==null?void 0:w.section,m);return t.jsxs("div",{children:[i(g)," ",y]})}},{field:"contact_no",headerName:"CONTACT",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"updated_at",headerName:"UPDATED AT",headerAlign:"center",align:"center",flex:1,minWidth:100,valueFormatter:e=>e==null?void 0:e.value.substring(0,10)},{field:"status",headerName:"STATUS",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:e}})=>t.jsx(l,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:e==="active"?n.greenAccent[600]:n.redAccent[700],borderRadius:"4px",children:t.jsx(N,{color:n.grey[100],sx:{ml:"5px"},children:e})})},{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:e}})=>t.jsx(l,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:t.jsx(C,{color:"info",variant:"contained",onClick:()=>u(e),sx:{minWidth:"50px"},children:t.jsx(D,{})})})}]},j=r=>({type:k.SET_TEACHERS,payload:r}),O=[5,10,20],H=()=>{const r=b(),x=I(),m=B(),s=T("(max-width:480px)"),c=T("(max-width:920px)"),n=v(a=>a.menuItems.selected),{listData:d}=v(a=>a.allTeachers),[p,i]=o.useState({search:!1,searching:!1}),[h,A]=o.useState(),{getPaginatedData:u}=R(),{getLocalStorage:S}=P(),e=E(r.palette.mode),g=document.getElementById("reload-btn");o.useEffect(()=>{const a=S("menu");m(W(a.selected))},[]);const y=()=>{g.style.display="none",i({search:!1,searching:!1,oldPagination:h})};return t.jsxs(l,{m:"10px",position:"relative",children:[t.jsx(l,{height:s?"19vh":c?"8vh":"11vh",borderRadius:"4px",padding:s?"1vh":"2vh",backgroundColor:e.blueAccent[700],children:t.jsxs(l,{display:"flex",height:s?"16vh":"7vh",flexDirection:s?"column":"row",justifyContent:"space-between",alignItems:s?"center":"normal",children:[t.jsx(N,{component:"h2",variant:"h2",color:e.grey[100],fontWeight:"bold",children:n}),t.jsx(L,{action:j,api:f.TeacherAPI,getSearchData:u,oldPagination:h,reloadBtn:g,setSearchFlag:i}),t.jsxs(C,{type:"submit",color:"success",variant:"contained",onClick:()=>{x(`/${n.toLowerCase()}/create`)},sx:{height:c?"4vh":"auto"},children:["Create New ",n]})]})}),t.jsxs(C,{sx:{display:"none",position:"absolute",top:s?"23vh":c?"10.5vh":"16.5vh",left:s?"80vw":c?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:e.grey[100]},id:"reload-btn",type:"button",onClick:y,children:[t.jsx("span",{style:{display:"inherit",marginRight:"5px",marginLeft:"-2px"},children:t.jsx($,{})}),"Back"]}),t.jsx(M,{action:j,api:f.TeacherAPI,getQuery:u,columns:_(),rows:d.rows,count:d.count,selected:n,pageSizeOptions:O,setOldPagination:A,searchFlag:p,setSearchFlag:i})]})};export{H as default};
