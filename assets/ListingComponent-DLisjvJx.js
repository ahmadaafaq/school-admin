import{u as C,t as S,n as k,j as e,B as i,T as B,h as g,m as b,o as R,b as y,a as u,s as W,A as j,P as D,U as E}from"./index-dsWAcX1f.js";import{d as L,l as w,S as U,a as _,b as $}from"./listBG-dw88K66u.js";import{s as A}from"./BusAction-uveimY1R.js";import{u as M}from"./index-uKa1WJb8.js";import"./FormControlLabel-GbaKk4ky.js";import"./toPropertyKey-Z1a84DJL.js";import"./typeof-LnL08gqA.js";import"./CircularProgress-4dZqOr9B.js";const z=(s=null)=>{const r=C(),n=S(r.palette.mode),d=k(),l=t=>{d(`/bus/update/${t}`,{state:{id:t}})};return[{field:"registration_no",headerName:"Registration Number",headerAlign:"center",align:"center",flex:1,minWidth:120},{field:"driver",headerName:"Driver",headerAlign:"center",align:"center",flex:1,minWidth:120,valueGetter:t=>t.row.driver.charAt(0).toUpperCase()+t.row.driver.slice(1)||""},{field:"driver_contact",headerName:"Contact",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"driver_license",headerName:"License",headerAlign:"center",align:"center",flex:1,minWidth:100},{field:"status",headerName:"STATUS",headerAlign:"center",align:"center",flex:1,minWidth:120,renderCell:({row:{status:t}})=>e.jsx(i,{width:"60%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",backgroundColor:t==="active"?n.greenAccent[600]:n.redAccent[700],borderRadius:"4px",children:e.jsx(B,{color:n.grey[100],sx:{ml:"5px"},children:t.charAt(0).toUpperCase()+t.slice(1)||""})})},s!==1&&{field:"action",headerName:"ACTION",headerAlign:"center",align:"center",flex:1,minWidth:75,renderCell:({row:{id:t}})=>e.jsx(i,{width:"30%",m:"0 auto",p:"5px",display:"flex",justifyContent:"center",children:e.jsx(g,{color:"info",variant:"contained",onClick:()=>l(t),sx:{minWidth:"50px"},children:e.jsx(L,{})})})}]},O=[5,10,20],F=({rolePriority:s=null})=>{const r=b(o=>o.menuItems.selected),{listData:n,loading:d}=b(o=>o.allBuses),l=C(),m=k(),t=R(),a=y("(max-width:480px)"),c=y("(max-width:920px)"),[T,h]=u.useState({search:!1,searching:!1}),[x,I]=u.useState(),{getPaginatedData:f}=M(),{getLocalStorage:N}=E(),p=S(l.palette.mode),v=document.getElementById("reload-btn"),P=()=>{v.style.display="none",h({search:!1,searching:!1,oldPagination:x})};return u.useEffect(()=>{const o=N("menu");t(W(o.selected))},[]),e.jsxs(i,{m:"10px",position:"relative",sx:{borderRadius:"20px",border:"0.5px solid black",overflow:"hidden",boxShadow:"1px 1px 10px black",backgroundImage:l.palette.mode==="light"?`linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url(${w})`:`linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(${w})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[e.jsx(i,{height:a?"19vh":c?"8vh":"11vh",borderRadius:"4px",padding:a?"1vh":"2vh",backgroundColor:p.blueAccent[700],children:e.jsxs(i,{display:"flex",height:a?"16vh":"7vh",flexDirection:a?"column":"row",justifyContent:"space-between",alignItems:a?"center":"normal",children:[e.jsx(B,{component:"h2",variant:"h2",color:p.grey[100],fontWeight:"bold",children:r}),e.jsx(U,{action:A,api:j.BusAPI,getSearchData:f,oldPagination:x,reloadBtn:v,setSearchFlag:h}),s>1&&e.jsxs(g,{type:"submit",color:"success",variant:"contained",onClick:()=>{m(`/${r.toLowerCase()}/create`)},sx:{height:c?"4vh":"auto"},children:["Create New ",r]})]})}),e.jsxs(g,{sx:{display:"none",position:"absolute",top:a?"23vh":c?"10.5vh":"16.5vh",left:a?"80vw":c?"39.5vw":"26vw",zIndex:1,borderRadius:"20%",color:p.grey[100],marginLeft:"14vh"},id:"reload-btn",type:"button",onClick:P,children:[e.jsx("span",{style:{display:"inherit",marginRight:"5px"},children:e.jsx(_,{})}),"Back"]}),e.jsx($,{action:A,api:j.BusAPI,getQuery:f,columns:z(s),rows:n.rows,count:n.count,loading:d,selected:r,pageSizeOptions:O,setOldPagination:I,searchFlag:T,setSearchFlag:h})]})};F.propTypes={rolePriority:D.number};export{F as default};
